{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/buyantogtokh/Documents/calhacks12/node_modules/tldraw/src/lib/ui/components/Toolbar/AltTextEditor.tsx"],"sourcesContent":["import { preventDefault, TLShape, TLShapeId, useEditor } from '@tldraw/editor'\nimport { useCallback, useEffect, useRef, useState } from 'react'\nimport { useUiEvents } from '../../context/events'\nimport { useTranslation } from '../../hooks/useTranslation/useTranslation'\nimport { TldrawUiButton } from '../primitives/Button/TldrawUiButton'\nimport { TldrawUiButtonIcon } from '../primitives/Button/TldrawUiButtonIcon'\nimport { TldrawUiInput } from '../primitives/TldrawUiInput'\n\n/** @public */\nexport interface AltTextEditorProps {\n\tshapeId: TLShapeId\n\tonClose(): void\n\tsource: 'image-toolbar' | 'video-toolbar'\n}\n\n/** @public @react */\nexport function AltTextEditor({ shapeId, onClose, source }: AltTextEditorProps) {\n\tconst editor = useEditor()\n\tconst [altText, setAltText] = useState(() => {\n\t\tconst shape = editor.getShape<TLShape>(shapeId)\n\t\tif (!shape) return ''\n\t\tif (!('altText' in shape.props)) throw Error('Shape does not have altText property')\n\t\treturn shape.props.altText || ''\n\t})\n\tconst msg = useTranslation()\n\tconst ref = useRef<HTMLInputElement>(null)\n\tconst trackEvent = useUiEvents()\n\tconst isReadonly = editor.getIsReadonly()\n\n\tconst handleValueChange = (value: string) => setAltText(value)\n\n\tconst handleComplete = () => {\n\t\ttrackEvent('set-alt-text', { source })\n\t\tconst shape = editor.getShape<TLShape & { props: { altText: string } }>(shapeId)\n\t\tif (!shape) return\n\t\teditor.updateShapes([\n\t\t\t{\n\t\t\t\tid: shape.id,\n\t\t\t\ttype: shape.type,\n\t\t\t\tprops: { altText },\n\t\t\t},\n\t\t])\n\t\tonClose()\n\t}\n\n\tconst handleConfirm = () => handleComplete()\n\tconst handleAltTextCancel = useCallback(() => onClose(), [onClose])\n\n\tuseEffect(() => {\n\t\tref.current?.select()\n\n\t\tfunction handleKeyDown(event: KeyboardEvent) {\n\t\t\tif (event.key === 'Escape') {\n\t\t\t\tevent.stopPropagation()\n\t\t\t\thandleAltTextCancel()\n\t\t\t}\n\t\t}\n\n\t\tdocument.addEventListener('keydown', handleKeyDown, { capture: true })\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleKeyDown, { capture: true })\n\t\t}\n\t}, [handleAltTextCancel])\n\n\treturn (\n\t\t<>\n\t\t\t<TldrawUiInput\n\t\t\t\tref={ref}\n\t\t\t\tclassName=\"tlui-media__toolbar-alt-text-input\"\n\t\t\t\tdata-testid=\"media-toolbar.alt-text-input\"\n\t\t\t\tvalue={altText}\n\t\t\t\tplaceholder={msg('tool.media-alt-text-desc')}\n\t\t\t\taria-label={msg('tool.media-alt-text-desc')}\n\t\t\t\tonValueChange={handleValueChange}\n\t\t\t\tonComplete={handleComplete}\n\t\t\t\tonCancel={handleAltTextCancel}\n\t\t\t\tdisabled={isReadonly}\n\t\t\t/>\n\t\t\t{!isReadonly && (\n\t\t\t\t<TldrawUiButton\n\t\t\t\t\ttitle={msg('tool.media-alt-text-confirm')}\n\t\t\t\t\tdata-testid=\"tool.media-alt-text-confirm\"\n\t\t\t\t\ttype=\"icon\"\n\t\t\t\t\tonPointerDown={preventDefault}\n\t\t\t\t\tonClick={handleConfirm}\n\t\t\t\t>\n\t\t\t\t\t<TldrawUiButtonIcon small icon=\"check\" />\n\t\t\t\t</TldrawUiButton>\n\t\t\t)}\n\t\t</>\n\t)\n}\n"],"names":[],"mappings":";;;;AAiEE,mBACC,KADD;;;AAjEF,SAAS,gBAAoC,iBAAiB;AAC9D,SAAS,aAAa,WAAW,QAAQ,gBAAgB;AACzD,SAAS,mBAAmB;AAC5B,SAAS,sBAAsB;AAC/B,SAAS,sBAAsB;AAC/B,SAAS,0BAA0B;AACnC,SAAS,qBAAqB;;;;;;;;;AAUvB,SAAS,cAAc,EAAE,OAAA,EAAS,OAAA,EAAS,MAAA,CAAO,CAAA,EAAuB;IAC/E,MAAM,aAAS,+LAAA,CAAU;IACzB,MAAM,CAAC,SAAS,UAAU,CAAA,OAAI,yKAAA;kCAAS,MAAM;YAC5C,MAAM,QAAQ,OAAO,QAAA,CAAkB,OAAO;YAC9C,IAAI,CAAC,MAAO,CAAA,OAAO;YACnB,IAAI,CAAA,CAAE,aAAa,MAAM,KAAA,EAAQ,CAAA,MAAM,MAAM,sCAAsC;YACnF,OAAO,MAAM,KAAA,CAAM,OAAA,IAAW;QAC/B,CAAC;;IACD,MAAM,UAAM,qNAAA,CAAe;IAC3B,MAAM,UAAM,uKAAA,EAAyB,IAAI;IACzC,MAAM,iBAAa,0LAAA,CAAY;IAC/B,MAAM,aAAa,OAAO,aAAA,CAAc;IAExC,MAAM,oBAAoB,CAAC,QAAkB,WAAW,KAAK;IAE7D,MAAM,iBAAiB,MAAM;QAC5B,WAAW,gBAAgB;YAAE;QAAO,CAAC;QACrC,MAAM,QAAQ,OAAO,QAAA,CAAmD,OAAO;QAC/E,IAAI,CAAC,MAAO,CAAA;QACZ,OAAO,YAAA,CAAa;YACnB;gBACC,IAAI,MAAM,EAAA;gBACV,MAAM,MAAM,IAAA;gBACZ,OAAO;oBAAE;gBAAQ;YAClB;SACA;QACD,QAAQ;IACT;IAEA,MAAM,gBAAgB,IAAM,eAAe;IAC3C,MAAM,0BAAsB,4KAAA;0DAAY,IAAM,QAAQ;yDAAG;QAAC,OAAO;KAAC;IAElE,IAAA,0KAAA;mCAAU,MAAM;YACf,IAAI,OAAA,EAAS,OAAO;YAEpB,SAAS,cAAc,KAAA,EAAsB;gBAC5C,IAAI,MAAM,GAAA,KAAQ,UAAU;oBAC3B,MAAM,eAAA,CAAgB;oBACtB,oBAAoB;gBACrB;YACD;YAEA,SAAS,gBAAA,CAAiB,WAAW,eAAe;gBAAE,SAAS;YAAK,CAAC;YACrE;2CAAO,MAAM;oBACZ,SAAS,mBAAA,CAAoB,WAAW,eAAe;wBAAE,SAAS;oBAAK,CAAC;gBACzE;;QACD;kCAAG;QAAC,mBAAmB;KAAC;IAExB,OACC,aAAA,GAAA,IAAA,8KAAA,EAAA,kLAAA,EAAA;QACC,UAAA;YAAA,aAAA,GAAA,IAAA,6KAAA,EAAC,oNAAA,EAAA;gBACA;gBACA,WAAU;gBACV,eAAY;gBACZ,OAAO;gBACP,aAAa,IAAI,0BAA0B;gBAC3C,cAAY,IAAI,0BAA0B;gBAC1C,eAAe;gBACf,YAAY;gBACZ,UAAU;gBACV,UAAU;YAAA;YAEV,CAAC,cACD,aAAA,GAAA,IAAA,6KAAA,EAAC,gOAAA,EAAA;gBACA,OAAO,IAAI,6BAA6B;gBACxC,eAAY;gBACZ,MAAK;gBACL,eAAe,8LAAA;gBACf,SAAS;gBAET,UAAA,aAAA,GAAA,IAAA,6KAAA,EAAC,wOAAA,EAAA;oBAAmB,OAAK;oBAAC,MAAK;gBAAA,CAAQ;YAAA;SACxC;IAAA,CAEF;AAEF","debugId":null}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":["file:///Users/buyantogtokh/Documents/calhacks12/node_modules/tldraw/src/lib/ui/components/Toolbar/DefaultImageToolbarContent.tsx"],"sourcesContent":["import {\n\tapproximately,\n\tisEqual,\n\tkickoutOccludedShapes,\n\tmodulate,\n\tTLImageShape,\n\tTLShapePartial,\n\ttrack,\n\tuseEditor,\n\tuseValue,\n} from '@tldraw/editor'\nimport { useCallback, useEffect, useRef, useState } from 'react'\nimport {\n\tASPECT_RATIO_OPTION,\n\tASPECT_RATIO_OPTIONS,\n\tASPECT_RATIO_TO_VALUE,\n\tgetCroppedImageDataForAspectRatio,\n\tgetCroppedImageDataWhenZooming,\n\tgetDefaultCrop,\n\tMAX_ZOOM,\n} from '../../../shapes/shared/crop'\nimport { useActions } from '../../context/actions'\nimport { useUiEvents } from '../../context/events'\nimport { useTranslation } from '../../hooks/useTranslation/useTranslation'\nimport { TldrawUiButtonIcon } from '../primitives/Button/TldrawUiButtonIcon'\nimport { TldrawUiButtonLabel } from '../primitives/Button/TldrawUiButtonLabel'\nimport {\n\tTldrawUiDropdownMenuCheckboxItem,\n\tTldrawUiDropdownMenuContent,\n\tTldrawUiDropdownMenuRoot,\n\tTldrawUiDropdownMenuTrigger,\n} from '../primitives/TldrawUiDropdownMenu'\nimport { TldrawUiSlider } from '../primitives/TldrawUiSlider'\nimport { TldrawUiToolbarButton } from '../primitives/TldrawUiToolbar'\n\n/** @public */\nexport interface DefaultImageToolbarContentProps {\n\timageShapeId: TLImageShape['id']\n\tisManipulating: boolean\n\tonEditAltTextStart(): void\n\tonManipulatingStart(): void\n\tonManipulatingEnd(): void\n}\n\n/** @public @react */\nexport const DefaultImageToolbarContent = track(function DefaultImageToolbarContent({\n\timageShapeId,\n\tisManipulating,\n\tonEditAltTextStart,\n\tonManipulatingStart,\n\tonManipulatingEnd,\n}: DefaultImageToolbarContentProps) {\n\tconst editor = useEditor()\n\tconst trackEvent = useUiEvents()\n\tconst msg = useTranslation()\n\tconst source = 'image-toolbar'\n\tconst sliderRef = useRef<HTMLDivElement>(null)\n\tconst isReadonly = editor.getIsReadonly()\n\n\tconst crop = useValue('crop', () => editor.getShape<TLImageShape>(imageShapeId)!.props.crop, [\n\t\teditor,\n\t\timageShapeId,\n\t])\n\tconst zoom = crop\n\t\t? Math.min(1 - (crop.bottomRight.x - crop.topLeft.x), 1 - (crop.bottomRight.y - crop.topLeft.y))\n\t\t: 0\n\tconst [maxZoom, setMaxZoom] = useState<number | undefined>(\n\t\tcrop ? Math.max(zoom, 1 - 1 / MAX_ZOOM) : MAX_ZOOM\n\t)\n\tconst actions = useActions()\n\n\t// So, we set a maxZoom here in case there's been a manual crop applied.\n\t// Typically, you can zoom 3x into the image size (MAX_ZOOM's value).\n\t// If you go deeper than that zoom level, we need to set that as the new 100%\n\t// value on the zoom slider (otherwise you could zoom into infinity).\n\t// This balances usage of the zoom slider with manual cropping.\n\tuseEffect(() => {\n\t\tsetMaxZoom(crop ? Math.max(zoom, 1 - 1 / MAX_ZOOM) : MAX_ZOOM)\n\t}, [crop, zoom, maxZoom])\n\n\tconst onHistoryMark = useCallback((id: string) => editor.markHistoryStoppingPoint(id), [editor])\n\n\t// Apply an easing function to smooth out the zoom curve,\n\t// otherwise the zoom slider has a cubic drag feel to it which feels off.\n\tconst easeZoom = useCallback((value: number, maxValue: number): number => {\n\t\tconst maxRatioConversion = MAX_ZOOM / (MAX_ZOOM - 1)\n\t\t// Use an easing function for a more natural zoom feel\n\t\treturn Math.pow(value / maxValue, maxRatioConversion) * maxValue\n\t}, [])\n\n\tconst displayValue =\n\t\tcrop && maxZoom\n\t\t\t? modulate(easeZoom(zoom, maxZoom), [0, maxZoom], [0, 100], true /* clamp */)\n\t\t\t: 0\n\n\tconst handleZoomChange = useCallback(\n\t\t(value: number) => {\n\t\t\teditor.setCurrentTool('select.crop.idle')\n\t\t\t// Convert the eased slider value back to the actual zoom value\n\t\t\tconst sliderPercent = value / 100\n\n\t\t\t// Convert the slider position back into the \"zoom\" value expected by\n\t\t\t// getCroppedImageDataWhenZooming.\n\t\t\t// 1. Undo the easing: z_out = sliderPercent^(1/maxRatioConversion) * maxZoom\n\t\t\t// 2. Translate z_out into the function's input domain. The helper computes\n\t\t\t//    the *resulting* zoom (z_out) using:\n\t\t\t//        z_out = 2 * z_in / (1 + 2 * z_in)\n\t\t\t//    Solving for z_in gives:\n\t\t\t//        z_in = z_out / (2 * (1 - z_out))\n\t\t\tconst maxDimension = 1 - 1 / MAX_ZOOM\n\t\t\tconst clampedMaxZoom = Math.min(maxDimension, maxZoom ?? maxDimension)\n\t\t\tconst maxRatioConversion = MAX_ZOOM / (MAX_ZOOM - 1)\n\t\t\tconst zOut = Math.pow(sliderPercent, 1 / maxRatioConversion) * clampedMaxZoom\n\t\t\tconst zoom = zOut >= 1 ? 1 : zOut / (2 * (1 - zOut))\n\t\t\tconst imageShape = editor.getShape<TLImageShape>(imageShapeId)\n\t\t\tif (!imageShape) return\n\n\t\t\tconst change = getCroppedImageDataWhenZooming(zoom, imageShape, maxZoom)\n\n\t\t\teditor.updateShape({\n\t\t\t\tid: imageShape.id,\n\t\t\t\ttype: imageShape.type,\n\t\t\t\tx: change.x,\n\t\t\t\ty: change.y,\n\t\t\t\tprops: {\n\t\t\t\t\tw: change.w,\n\t\t\t\t\th: change.h,\n\t\t\t\t\tcrop: change.crop,\n\t\t\t\t},\n\t\t\t} as TLShapePartial)\n\n\t\t\ttrackEvent('set-style', { source: 'image-toolbar', id: 'zoom', value })\n\t\t},\n\t\t[editor, trackEvent, imageShapeId, maxZoom]\n\t)\n\n\tconst handleImageReplace = useCallback(\n\t\t() => actions['image-replace'].onSelect('image-toolbar'),\n\t\t[actions]\n\t)\n\n\tconst handleImageDownload = useCallback(\n\t\t() => actions['download-original'].onSelect('image-toolbar'),\n\t\t[actions]\n\t)\n\n\tconst handleAspectRatioChange = (aspectRatio: ASPECT_RATIO_OPTION) => {\n\t\tconst imageShape = editor.getShape<TLImageShape>(imageShapeId)\n\t\tif (!imageShape) return\n\t\teditor.run(() => {\n\t\t\teditor.setCurrentTool('select.crop.idle')\n\t\t\tconst change = getCroppedImageDataForAspectRatio(aspectRatio, imageShape)\n\t\t\teditor.markHistoryStoppingPoint('aspect ratio')\n\t\t\teditor.updateShape({\n\t\t\t\tid: imageShapeId,\n\t\t\t\ttype: 'image',\n\t\t\t\tx: change.x,\n\t\t\t\ty: change.y,\n\t\t\t\tprops: {\n\t\t\t\t\tcrop: change.crop,\n\t\t\t\t\tw: change.w,\n\t\t\t\t\th: change.h,\n\t\t\t\t},\n\t\t\t} as TLShapePartial)\n\t\t\tkickoutOccludedShapes(editor, [imageShapeId])\n\t\t})\n\t}\n\n\tconst altText = useValue(\n\t\t'altText',\n\t\t() => editor.getShape<TLImageShape>(imageShapeId)!.props.altText,\n\t\t[editor, imageShapeId]\n\t)\n\tconst shapeAspectRatio = useValue(\n\t\t'shapeAspectRatio',\n\t\t() => {\n\t\t\tconst imageShape = editor.getShape<TLImageShape>(imageShapeId)!\n\t\t\treturn imageShape.props.w / imageShape.props.h\n\t\t},\n\t\t[editor, imageShapeId]\n\t)\n\tconst isOriginalCrop = !crop || isEqual(crop, getDefaultCrop())\n\n\tuseEffect(() => {\n\t\tif (isManipulating) {\n\t\t\teditor.timers.setTimeout(() => sliderRef.current?.focus(), 0)\n\t\t}\n\t}, [editor, isManipulating])\n\n\tuseEffect(() => {\n\t\tfunction handleKeyDown(e: KeyboardEvent) {\n\t\t\tif (isManipulating) {\n\t\t\t\tif (e.key === 'Escape') {\n\t\t\t\t\teditor.cancel()\n\t\t\t\t\tonManipulatingEnd()\n\t\t\t\t} else if (e.key === 'Enter') {\n\t\t\t\t\teditor.complete()\n\t\t\t\t\tonManipulatingEnd()\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst elm = sliderRef.current\n\t\tif (elm) {\n\t\t\telm.addEventListener('keydown', handleKeyDown)\n\t\t}\n\t\treturn () => {\n\t\t\tif (elm) {\n\t\t\t\telm.removeEventListener('keydown', handleKeyDown)\n\t\t\t}\n\t\t}\n\t}, [editor, isManipulating, onManipulatingEnd])\n\n\tif (isManipulating) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<TldrawUiSlider\n\t\t\t\t\tref={sliderRef}\n\t\t\t\t\tvalue={displayValue}\n\t\t\t\t\tlabel=\"tool.image-zoom\"\n\t\t\t\t\tonValueChange={handleZoomChange}\n\t\t\t\t\tonHistoryMark={onHistoryMark}\n\t\t\t\t\tmin={0}\n\t\t\t\t\tsteps={100}\n\t\t\t\t\tdata-testid=\"tool.image-zoom\"\n\t\t\t\t\ttitle={msg('tool.image-zoom')}\n\t\t\t\t/>\n\t\t\t\t<TldrawUiDropdownMenuRoot id=\"image-toolbar-aspect-ratio\">\n\t\t\t\t\t<TldrawUiDropdownMenuTrigger>\n\t\t\t\t\t\t<TldrawUiToolbarButton\n\t\t\t\t\t\t\ttitle={msg('tool.aspect-ratio')}\n\t\t\t\t\t\t\ttype=\"icon\"\n\t\t\t\t\t\t\tdata-testid=\"tool.image-aspect-ratio\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<TldrawUiButtonIcon icon=\"corners\" />\n\t\t\t\t\t\t</TldrawUiToolbarButton>\n\t\t\t\t\t</TldrawUiDropdownMenuTrigger>\n\t\t\t\t\t<TldrawUiDropdownMenuContent side=\"top\" align=\"center\">\n\t\t\t\t\t\t{ASPECT_RATIO_OPTIONS.map((aspectRatio) => {\n\t\t\t\t\t\t\tlet checked = false\n\t\t\t\t\t\t\tif (isOriginalCrop) {\n\t\t\t\t\t\t\t\tif (aspectRatio === 'original') {\n\t\t\t\t\t\t\t\t\tchecked = true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (aspectRatio === 'circle') {\n\t\t\t\t\t\t\t\t\tchecked = !!crop.isCircle\n\t\t\t\t\t\t\t\t} else if (aspectRatio === 'square') {\n\t\t\t\t\t\t\t\t\tchecked =\n\t\t\t\t\t\t\t\t\t\t!crop?.isCircle &&\n\t\t\t\t\t\t\t\t\t\tapproximately(shapeAspectRatio, ASPECT_RATIO_TO_VALUE[aspectRatio], 0.1)\n\t\t\t\t\t\t\t\t} else if (aspectRatio === 'original') {\n\t\t\t\t\t\t\t\t\tchecked = false\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tchecked =\n\t\t\t\t\t\t\t\t\t\t!isOriginalCrop &&\n\t\t\t\t\t\t\t\t\t\tapproximately(shapeAspectRatio, ASPECT_RATIO_TO_VALUE[aspectRatio], 0.01)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<TldrawUiDropdownMenuCheckboxItem\n\t\t\t\t\t\t\t\t\tkey={aspectRatio}\n\t\t\t\t\t\t\t\t\tonSelect={() => handleAspectRatioChange(aspectRatio as ASPECT_RATIO_OPTION)}\n\t\t\t\t\t\t\t\t\tchecked={checked}\n\t\t\t\t\t\t\t\t\ttitle={msg(`tool.aspect-ratio.${aspectRatio}`)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<TldrawUiButtonLabel>\n\t\t\t\t\t\t\t\t\t\t{msg(`tool.aspect-ratio.${aspectRatio}`)}\n\t\t\t\t\t\t\t\t\t</TldrawUiButtonLabel>\n\t\t\t\t\t\t\t\t</TldrawUiDropdownMenuCheckboxItem>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})}\n\t\t\t\t\t</TldrawUiDropdownMenuContent>\n\t\t\t\t</TldrawUiDropdownMenuRoot>\n\t\t\t\t<TldrawUiToolbarButton\n\t\t\t\t\ttype=\"icon\"\n\t\t\t\t\tonClick={onManipulatingEnd}\n\t\t\t\t\tdata-testid=\"tool.image-crop-confirm\"\n\t\t\t\t\tstyle={{ borderLeft: '1px solid var(--tl-color-divider)', marginLeft: '2px' }}\n\t\t\t\t\ttitle={msg('tool.image-crop-confirm')}\n\t\t\t\t>\n\t\t\t\t\t<TldrawUiButtonIcon small icon=\"check\" />\n\t\t\t\t</TldrawUiToolbarButton>\n\t\t\t</>\n\t\t)\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{!isReadonly && (\n\t\t\t\t<TldrawUiToolbarButton\n\t\t\t\t\ttype=\"icon\"\n\t\t\t\t\tdata-testid=\"tool.image-replace\"\n\t\t\t\t\tonClick={handleImageReplace}\n\t\t\t\t\ttitle={msg('tool.replace-media')}\n\t\t\t\t>\n\t\t\t\t\t<TldrawUiButtonIcon small icon=\"tool-media\" />\n\t\t\t\t</TldrawUiToolbarButton>\n\t\t\t)}\n\t\t\t{!isReadonly && (\n\t\t\t\t<TldrawUiToolbarButton\n\t\t\t\t\ttype=\"icon\"\n\t\t\t\t\ttitle={msg('tool.image-crop')}\n\t\t\t\t\tonClick={onManipulatingStart}\n\t\t\t\t\tdata-testid=\"tool.image-crop\"\n\t\t\t\t>\n\t\t\t\t\t<TldrawUiButtonIcon small icon=\"crop\" />\n\t\t\t\t</TldrawUiToolbarButton>\n\t\t\t)}\n\t\t\t<TldrawUiToolbarButton\n\t\t\t\ttype=\"icon\"\n\t\t\t\ttitle={msg('action.download-original')}\n\t\t\t\tonClick={handleImageDownload}\n\t\t\t\tdata-testid=\"tool.image-download\"\n\t\t\t>\n\t\t\t\t<TldrawUiButtonIcon small icon=\"download\" />\n\t\t\t</TldrawUiToolbarButton>\n\t\t\t{(altText || !isReadonly) && (\n\t\t\t\t<TldrawUiToolbarButton\n\t\t\t\t\ttype=\"icon\"\n\t\t\t\t\ttitle={msg('tool.media-alt-text')}\n\t\t\t\t\tdata-testid=\"tool.image-alt-text\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\ttrackEvent('alt-text-start', { source })\n\t\t\t\t\t\tonEditAltTextStart()\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<TldrawUiButtonIcon small icon=\"alt\" />\n\t\t\t\t</TldrawUiToolbarButton>\n\t\t\t)}\n\t\t</>\n\t)\n})\n"],"names":["DefaultImageToolbarContent", "zoom"],"mappings":"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","debugId":null}},
    {"offset": {"line": 455, "column": 0}, "map": {"version":3,"sources":["file:///Users/buyantogtokh/Documents/calhacks12/node_modules/tldraw/src/lib/ui/components/Toolbar/DefaultImageToolbar.tsx"],"sourcesContent":["import { Box, TLImageShape, useEditor, useValue } from '@tldraw/editor'\nimport { useCallback, useEffect, useRef, useState } from 'react'\nimport { useTranslation } from '../../hooks/useTranslation/useTranslation'\nimport { TldrawUiContextualToolbar } from '../primitives/TldrawUiContextualToolbar'\nimport { AltTextEditor } from './AltTextEditor'\nimport { DefaultImageToolbarContent } from './DefaultImageToolbarContent'\n\n/** @public */\nexport interface TLUiImageToolbarProps {\n\tchildren?: React.ReactNode\n}\n\n/** @public @react */\nexport function DefaultImageToolbar({ children }: TLUiImageToolbarProps) {\n\tconst editor = useEditor()\n\tconst imageShapeId = useValue(\n\t\t'imageShape',\n\t\t() => {\n\t\t\tconst onlySelectedShape = editor.getOnlySelectedShape()\n\t\t\tif (!onlySelectedShape || onlySelectedShape.type !== 'image') return null\n\t\t\treturn onlySelectedShape.id\n\t\t},\n\t\t[editor]\n\t)\n\tconst showToolbar = useValue(\n\t\t'showToolbar',\n\t\t() => editor.isInAny('select.idle', 'select.pointing_shape', 'select.crop'),\n\t\t[editor]\n\t)\n\tconst isLocked = useValue(\n\t\t'locked',\n\t\t() => (imageShapeId ? editor.getShape<TLImageShape>(imageShapeId)?.isLocked : false),\n\t\t[editor, imageShapeId]\n\t)\n\tif (!imageShapeId || !showToolbar || isLocked) return null\n\n\treturn (\n\t\t<ContextualToolbarInner key={imageShapeId} imageShapeId={imageShapeId}>\n\t\t\t{children}\n\t\t</ContextualToolbarInner>\n\t)\n}\n\nfunction ContextualToolbarInner({\n\tchildren,\n\timageShapeId,\n}: {\n\tchildren?: React.ReactNode\n\timageShapeId: TLImageShape['id']\n}) {\n\tconst editor = useEditor()\n\tconst msg = useTranslation()\n\n\tconst isChangingCrop = useValue(\n\t\t'editor path',\n\t\t() =>\n\t\t\teditor.isInAny(\n\t\t\t\t'select.crop.cropping',\n\t\t\t\t'select.crop.pointing_crop_handle',\n\t\t\t\t'select.crop.translating_crop'\n\t\t\t),\n\t\t[editor]\n\t)\n\tconst camera = useValue('camera', () => editor.getCamera(), [editor])\n\tconst isInCropTool = useValue('editor path', () => editor.isIn('select.crop.'), [editor])\n\tconst previousSelectionBounds = useRef<Box | undefined>()\n\tconst handleManipulatingEnd = useCallback(() => {\n\t\teditor.setCroppingShape(null)\n\t\teditor.setCurrentTool('select.idle')\n\t}, [editor])\n\n\tconst [isEditingAltText, setIsEditingAltText] = useState(false)\n\tconst handleEditAltTextStart = useCallback(() => setIsEditingAltText(true), [])\n\tconst handleManipulatingStart = useCallback(\n\t\t() => editor.setCurrentTool('select.crop.idle'),\n\t\t[editor]\n\t)\n\tconst onEditAltTextClose = useCallback(() => setIsEditingAltText(false), [])\n\n\tuseEffect(() => {\n\t\tpreviousSelectionBounds.current = undefined\n\t}, [camera])\n\n\tconst getSelectionBounds = useCallback(() => {\n\t\tif (isInCropTool && previousSelectionBounds.current) {\n\t\t\t// If we're cropping we want to be able to keep the toolbar in the same position.\n\t\t\treturn previousSelectionBounds.current\n\t\t}\n\t\tconst fullBounds = editor.getSelectionScreenBounds()\n\t\tif (!fullBounds) return undefined\n\t\tconst bounds = new Box(fullBounds.x, fullBounds.y, fullBounds.width, 0)\n\t\tpreviousSelectionBounds.current = bounds\n\t\treturn bounds\n\t}, [editor, isInCropTool])\n\n\tif (isChangingCrop) {\n\t\tpreviousSelectionBounds.current = undefined\n\t\treturn null\n\t}\n\n\treturn (\n\t\t<TldrawUiContextualToolbar\n\t\t\tclassName=\"tlui-image__toolbar\"\n\t\t\tgetSelectionBounds={getSelectionBounds}\n\t\t\tlabel={msg('tool.image-toolbar-title')}\n\t\t>\n\t\t\t{children ? (\n\t\t\t\tchildren\n\t\t\t) : isEditingAltText ? (\n\t\t\t\t<AltTextEditor shapeId={imageShapeId} onClose={onEditAltTextClose} source=\"image-toolbar\" />\n\t\t\t) : (\n\t\t\t\t<DefaultImageToolbarContent\n\t\t\t\t\timageShapeId={imageShapeId}\n\t\t\t\t\tisManipulating={isInCropTool}\n\t\t\t\t\tonEditAltTextStart={handleEditAltTextStart}\n\t\t\t\t\tonManipulatingStart={handleManipulatingStart}\n\t\t\t\t\tonManipulatingEnd={handleManipulatingEnd}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</TldrawUiContextualToolbar>\n\t)\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 592, "column": 0}, "map": {"version":3,"sources":["file:///Users/buyantogtokh/Documents/calhacks12/node_modules/tldraw/src/lib/ui/components/Toolbar/DefaultRichTextToolbarContent.tsx"],"sourcesContent":["import { isAccelKey, preventDefault, TiptapEditor } from '@tldraw/editor'\nimport { useEffect, useMemo, useState } from 'react'\nimport { useUiEvents } from '../../context/events'\nimport { useTranslation } from '../../hooks/useTranslation/useTranslation'\nimport { TldrawUiButtonIcon } from '../primitives/Button/TldrawUiButtonIcon'\nimport { TldrawUiToolbarButton } from '../primitives/TldrawUiToolbar'\n\n/** @public */\nexport interface DefaultRichTextToolbarContentProps {\n\tonEditLinkStart?(): void\n\ttextEditor: TiptapEditor\n}\n\n/**\n * Rich text toolbar items that have the basics.\n *\n * @public @react\n */\nexport function DefaultRichTextToolbarContent({\n\ttextEditor,\n\tonEditLinkStart,\n}: DefaultRichTextToolbarContentProps) {\n\tconst trackEvent = useUiEvents()\n\tconst msg = useTranslation()\n\tconst source = 'rich-text-menu'\n\n\t// We need to force this one to update when the editor updates or when selection changes\n\tconst [_, set] = useState(0)\n\tuseEffect(\n\t\tfunction forceUpdateWhenContentChanges() {\n\t\t\tfunction forceUpdate() {\n\t\t\t\tset((t) => t + 1)\n\t\t\t}\n\t\t\ttextEditor.on('update', forceUpdate)\n\t\t\ttextEditor.on('selectionUpdate', forceUpdate)\n\t\t},\n\t\t[textEditor]\n\t)\n\n\tuseEffect(() => {\n\t\tfunction handleKeyDown(event: KeyboardEvent) {\n\t\t\tif (onEditLinkStart && isAccelKey(event) && event.shiftKey && event.key === 'k') {\n\t\t\t\tevent.preventDefault()\n\t\t\t\tonEditLinkStart()\n\t\t\t}\n\t\t}\n\n\t\tdocument.addEventListener('keydown', handleKeyDown)\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleKeyDown)\n\t\t}\n\t}, [onEditLinkStart])\n\n\t// todo: we could make this a prop\n\tconst actions = useMemo(() => {\n\t\tfunction handleOp(name: string, op: string) {\n\t\t\ttrackEvent('rich-text', { operation: name as any, source })\n\t\t\t// @ts-expect-error typing this is annoying at the moment.\n\t\t\ttextEditor.chain().focus()[op]().run()\n\t\t}\n\n\t\treturn [\n\t\t\t// { name: 'heading', attrs: { level: 3 }, onSelect() { textEditor.chain().focus().toggleHeading({ level: 3}).run() }},\n\t\t\t{\n\t\t\t\tname: 'bold',\n\t\t\t\tonSelect() {\n\t\t\t\t\thandleOp('bold', 'toggleBold')\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'italic',\n\t\t\t\tonSelect() {\n\t\t\t\t\thandleOp('bold', 'toggleItalic')\n\t\t\t\t},\n\t\t\t},\n\t\t\t// { name: 'underline', onSelect() { handleOp('underline', 'toggleUnderline') }},\n\t\t\t// { name: 'strike', onSelect() { handleOp('strike', 'toggleStrike')  }},\n\t\t\t{\n\t\t\t\tname: 'code',\n\t\t\t\tonSelect() {\n\t\t\t\t\thandleOp('bold', 'toggleCode')\n\t\t\t\t},\n\t\t\t},\n\t\t\tonEditLinkStart\n\t\t\t\t? {\n\t\t\t\t\t\tname: 'link',\n\t\t\t\t\t\tonSelect() {\n\t\t\t\t\t\t\tonEditLinkStart()\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t: undefined, // ? is this really optional?\n\t\t\t{\n\t\t\t\tname: 'bulletList',\n\t\t\t\tonSelect() {\n\t\t\t\t\thandleOp('bulletList', 'toggleBulletList')\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'highlight',\n\t\t\t\tonSelect() {\n\t\t\t\t\thandleOp('bulletList', 'toggleHighlight')\n\t\t\t\t},\n\t\t\t},\n\t\t].filter(Boolean) as {\n\t\t\tname: string\n\t\t\tattrs?: string\n\t\t\tonSelect(): void\n\t\t}[]\n\t}, [textEditor, trackEvent, onEditLinkStart])\n\n\treturn actions.map(({ name, attrs, onSelect }) => {\n\t\tconst isActive = textEditor.isActive(name, attrs)\n\t\treturn (\n\t\t\t<TldrawUiToolbarButton\n\t\t\t\tkey={name}\n\t\t\t\ttitle={msg(`tool.rich-text-${name}`)}\n\t\t\t\tdata-testid={`rich-text.${name}`}\n\t\t\t\ttype=\"icon\"\n\t\t\t\tisActive={isActive} // todo: we need to update this only when the text editor \"settles\", ie not during a change of selection\n\t\t\t\tonPointerDown={preventDefault}\n\t\t\t\tonClick={onSelect}\n\t\t\t\trole=\"option\"\n\t\t\t\taria-pressed={isActive}\n\t\t\t>\n\t\t\t\t<TldrawUiButtonIcon small icon={name} />\n\t\t\t</TldrawUiToolbarButton>\n\t\t)\n\t})\n}\n"],"names":[],"mappings":";;;;AA4HI;;;AA5HJ,SAAS,YAAY,sBAAoC;AACzD,SAAS,WAAW,SAAS,gBAAgB;AAC7C,SAAS,mBAAmB;AAC5B,SAAS,sBAAsB;AAC/B,SAAS,0BAA0B;AACnC,SAAS,6BAA6B;;;;;;;;AAa/B,SAAS,8BAA8B,EAC7C,UAAA,EACA,eAAA,EACD,EAAuC;IACtC,MAAM,iBAAa,0LAAA,CAAY;IAC/B,MAAM,UAAM,qNAAA,CAAe;IAC3B,MAAM,SAAS;IAGf,MAAM,CAAC,GAAG,GAAG,CAAA,OAAI,yKAAA,EAAS,CAAC;IAC3B,IAAA,0KAAA,EACC,SAAS,gCAAgC;QACxC,SAAS,cAAc;YACtB;qGAAI,CAAC,IAAM,IAAI,CAAC;;QACjB;QACA,WAAW,EAAA,CAAG,UAAU,WAAW;QACnC,WAAW,EAAA,CAAG,mBAAmB,WAAW;IAC7C,GACA;QAAC,UAAU;KAAA;IAGZ,IAAA,0KAAA;mDAAU,MAAM;YACf,SAAS,cAAc,KAAA,EAAsB;gBAC5C,IAAI,uBAAmB,+LAAA,EAAW,KAAK,KAAK,MAAM,QAAA,IAAY,MAAM,GAAA,KAAQ,KAAK;oBAChF,MAAM,cAAA,CAAe;oBACrB,gBAAgB;gBACjB;YACD;YAEA,SAAS,gBAAA,CAAiB,WAAW,aAAa;YAClD;2DAAO,MAAM;oBACZ,SAAS,mBAAA,CAAoB,WAAW,aAAa;gBACtD;;QACD;kDAAG;QAAC,eAAe;KAAC;IAGpB,MAAM,cAAU,wKAAA;0DAAQ,MAAM;YAC7B,SAAS,SAAS,IAAA,EAAc,EAAA,EAAY;gBAC3C,WAAW,aAAa;oBAAE,WAAW;oBAAa;gBAAO,CAAC;gBAE1D,WAAW,KAAA,CAAM,EAAE,KAAA,CAAM,CAAA,CAAE,EAAE,CAAA,CAAE,EAAE,GAAA,CAAI;YACtC;YAEA,OAAO;gBAAA,uHAAA;gBAEN;oBACC,MAAM;oBACN,WAAW;wBACV,SAAS,QAAQ,YAAY;oBAC9B;gBACD;gBACA;oBACC,MAAM;oBACN,WAAW;wBACV,SAAS,QAAQ,cAAc;oBAChC;gBACD;gBAAA,iFAAA;gBAAA,yEAAA;gBAGA;oBACC,MAAM;oBACN,WAAW;wBACV,SAAS,QAAQ,YAAY;oBAC9B;gBACD;gBACA,kBACG;oBACA,MAAM;oBACN,WAAW;wBACV,gBAAgB;oBACjB;gBACD,IACC,KAAA;gBAAA,6BAAA;gBACH;oBACC,MAAM;oBACN,WAAW;wBACV,SAAS,cAAc,kBAAkB;oBAC1C;gBACD;gBACA;oBACC,MAAM;oBACN,WAAW;wBACV,SAAS,cAAc,iBAAiB;oBACzC;gBACD;aACD,CAAE,MAAA,CAAO,OAAO;QAKjB;yDAAG;QAAC;QAAY;QAAY,eAAe;KAAC;IAE5C,OAAO,QAAQ,GAAA,CAAI,CAAC,EAAE,IAAA,EAAM,KAAA,EAAO,QAAA,CAAS,CAAA,KAAM;QACjD,MAAM,WAAW,WAAW,QAAA,CAAS,MAAM,KAAK;QAChD,OACC,aAAA,GAAA,IAAA,6KAAA,EAAC,8NAAA,EAAA;YAEA,OAAO,IAAI,CAAA,eAAA,EAAkB,IAAI,EAAE;YACnC,eAAa,CAAA,UAAA,EAAa,IAAI,EAAA;YAC9B,MAAK;YACL;YACA,eAAe,8LAAA;YACf,SAAS;YACT,MAAK;YACL,gBAAc;YAEd,UAAA,aAAA,GAAA,IAAA,6KAAA,EAAC,wOAAA,EAAA;gBAAmB,OAAK;gBAAC,MAAM;YAAA,CAAM;QAAA,GAVjC;IAaR,CAAC;AACF","debugId":null}},
    {"offset": {"line": 727, "column": 0}, "map": {"version":3,"sources":["file:///Users/buyantogtokh/Documents/calhacks12/node_modules/tldraw/src/lib/ui/components/Toolbar/LinkEditor.tsx"],"sourcesContent":["import { preventDefault, TiptapEditor, useEditor } from '@tldraw/editor'\nimport { useEffect, useRef, useState } from 'react'\nimport { useUiEvents } from '../../context/events'\nimport { useTranslation } from '../../hooks/useTranslation/useTranslation'\nimport { TldrawUiButton } from '../primitives/Button/TldrawUiButton'\nimport { TldrawUiButtonIcon } from '../primitives/Button/TldrawUiButtonIcon'\nimport { TldrawUiInput } from '../primitives/TldrawUiInput'\n\n/** @public */\nexport interface LinkEditorProps {\n\ttextEditor: TiptapEditor\n\tvalue: string\n\tonClose(): void\n}\n\n/** @public @react */\nexport function LinkEditor({ textEditor, value: initialValue, onClose }: LinkEditorProps) {\n\tconst editor = useEditor()\n\tconst [value, setValue] = useState(initialValue)\n\tconst msg = useTranslation()\n\tconst ref = useRef<HTMLInputElement>(null)\n\tconst trackEvent = useUiEvents()\n\tconst source = 'rich-text-menu'\n\tconst linkifiedValue = value.startsWith('http') ? value : `https://${value}`\n\n\tconst handleValueChange = (value: string) => setValue(value)\n\n\tconst handleLinkComplete = (link: string) => {\n\t\ttrackEvent('rich-text', { operation: 'link-edit', source })\n\t\tif (!link.startsWith('http://') && !link.startsWith('https://')) {\n\t\t\tlink = `https://${link}`\n\t\t}\n\n\t\ttextEditor.commands.setLink({ href: link })\n\t\t// N.B. We shouldn't focus() on mobile because it causes the\n\t\t// Return key to replace the link with a newline :facepalm:\n\t\tif (editor.getInstanceState().isCoarsePointer) {\n\t\t\ttextEditor.commands.blur()\n\t\t} else {\n\t\t\ttextEditor.commands.focus()\n\t\t}\n\t\tonClose()\n\t}\n\n\tconst handleVisitLink = () => {\n\t\ttrackEvent('rich-text', { operation: 'link-visit', source })\n\t\twindow.open(linkifiedValue, '_blank', 'noopener, noreferrer')\n\t\tonClose()\n\t}\n\n\tconst handleRemoveLink = () => {\n\t\ttrackEvent('rich-text', { operation: 'link-remove', source })\n\t\ttextEditor.chain().unsetLink().focus().run()\n\t\tonClose()\n\t}\n\n\tconst handleLinkCancel = () => onClose()\n\n\tuseEffect(() => {\n\t\tref.current?.focus()\n\t}, [value])\n\n\tuseEffect(() => {\n\t\tsetValue(initialValue)\n\t}, [initialValue])\n\n\treturn (\n\t\t<>\n\t\t\t<TldrawUiInput\n\t\t\t\tref={ref}\n\t\t\t\tdata-testid=\"rich-text.link-input\"\n\t\t\t\tclassName=\"tlui-rich-text__toolbar-link-input\"\n\t\t\t\tvalue={value}\n\t\t\t\tonValueChange={handleValueChange}\n\t\t\t\tonComplete={handleLinkComplete}\n\t\t\t\tonCancel={handleLinkCancel}\n\t\t\t\tplaceholder=\"example.com\"\n\t\t\t\taria-label=\"example.com\"\n\t\t\t/>\n\t\t\t<TldrawUiButton\n\t\t\t\tclassName=\"tlui-rich-text__toolbar-link-visit\"\n\t\t\t\ttitle={msg('tool.rich-text-link-visit')}\n\t\t\t\ttype=\"icon\"\n\t\t\t\tonPointerDown={preventDefault}\n\t\t\t\tonClick={handleVisitLink}\n\t\t\t\tdisabled={!value}\n\t\t\t>\n\t\t\t\t<TldrawUiButtonIcon small icon=\"external-link\" />\n\t\t\t</TldrawUiButton>\n\t\t\t<TldrawUiButton\n\t\t\t\tclassName=\"tlui-rich-text__toolbar-link-remove\"\n\t\t\t\ttitle={msg('tool.rich-text-link-remove')}\n\t\t\t\tdata-testid=\"rich-text.link-remove\"\n\t\t\t\ttype=\"icon\"\n\t\t\t\tonPointerDown={preventDefault}\n\t\t\t\tonClick={handleRemoveLink}\n\t\t\t>\n\t\t\t\t<TldrawUiButtonIcon small icon=\"trash\" />\n\t\t\t</TldrawUiButton>\n\t\t</>\n\t)\n}\n"],"names":["value"],"mappings":";;;;AAmEE,mBACC,KADD;;;AAnEF,SAAS,gBAA8B,iBAAiB;AACxD,SAAS,WAAW,QAAQ,gBAAgB;AAC5C,SAAS,mBAAmB;AAC5B,SAAS,sBAAsB;AAC/B,SAAS,sBAAsB;AAC/B,SAAS,0BAA0B;AACnC,SAAS,qBAAqB;;;;;;;;;AAUvB,SAAS,WAAW,EAAE,UAAA,EAAY,OAAO,YAAA,EAAc,OAAA,CAAQ,CAAA,EAAoB;IACzF,MAAM,aAAS,+LAAA,CAAU;IACzB,MAAM,CAAC,OAAO,QAAQ,CAAA,OAAI,yKAAA,EAAS,YAAY;IAC/C,MAAM,UAAM,qNAAA,CAAe;IAC3B,MAAM,UAAM,uKAAA,EAAyB,IAAI;IACzC,MAAM,iBAAa,0LAAA,CAAY;IAC/B,MAAM,SAAS;IACf,MAAM,iBAAiB,MAAM,UAAA,CAAW,MAAM,IAAI,QAAQ,CAAA,QAAA,EAAW,KAAK,EAAA;IAE1E,MAAM,oBAAoB,CAACA,SAAkB,SAASA,MAAK;IAE3D,MAAM,qBAAqB,CAAC,SAAiB;QAC5C,WAAW,aAAa;YAAE,WAAW;YAAa;QAAO,CAAC;QAC1D,IAAI,CAAC,KAAK,UAAA,CAAW,SAAS,KAAK,CAAC,KAAK,UAAA,CAAW,UAAU,GAAG;YAChE,OAAO,CAAA,QAAA,EAAW,IAAI,EAAA;QACvB;QAEA,WAAW,QAAA,CAAS,OAAA,CAAQ;YAAE,MAAM;QAAK,CAAC;QAG1C,IAAI,OAAO,gBAAA,CAAiB,EAAE,eAAA,EAAiB;YAC9C,WAAW,QAAA,CAAS,IAAA,CAAK;QAC1B,OAAO;YACN,WAAW,QAAA,CAAS,KAAA,CAAM;QAC3B;QACA,QAAQ;IACT;IAEA,MAAM,kBAAkB,MAAM;QAC7B,WAAW,aAAa;YAAE,WAAW;YAAc;QAAO,CAAC;QAC3D,OAAO,IAAA,CAAK,gBAAgB,UAAU,sBAAsB;QAC5D,QAAQ;IACT;IAEA,MAAM,mBAAmB,MAAM;QAC9B,WAAW,aAAa;YAAE,WAAW;YAAe;QAAO,CAAC;QAC5D,WAAW,KAAA,CAAM,EAAE,SAAA,CAAU,EAAE,KAAA,CAAM,EAAE,GAAA,CAAI;QAC3C,QAAQ;IACT;IAEA,MAAM,mBAAmB,IAAM,QAAQ;IAEvC,IAAA,0KAAA;gCAAU,MAAM;YACf,IAAI,OAAA,EAAS,MAAM;QACpB;+BAAG;QAAC,KAAK;KAAC;IAEV,IAAA,0KAAA;gCAAU,MAAM;YACf,SAAS,YAAY;QACtB;+BAAG;QAAC,YAAY;KAAC;IAEjB,OACC,aAAA,GAAA,IAAA,8KAAA,EAAA,kLAAA,EAAA;QACC,UAAA;YAAA,aAAA,GAAA,IAAA,6KAAA,EAAC,oNAAA,EAAA;gBACA;gBACA,eAAY;gBACZ,WAAU;gBACV;gBACA,eAAe;gBACf,YAAY;gBACZ,UAAU;gBACV,aAAY;gBACZ,cAAW;YAAA;YAEZ,aAAA,GAAA,IAAA,6KAAA,EAAC,gOAAA,EAAA;gBACA,WAAU;gBACV,OAAO,IAAI,2BAA2B;gBACtC,MAAK;gBACL,eAAe,8LAAA;gBACf,SAAS;gBACT,UAAU,CAAC;gBAEX,UAAA,aAAA,GAAA,IAAA,6KAAA,EAAC,wOAAA,EAAA;oBAAmB,OAAK;oBAAC,MAAK;gBAAA,CAAgB;YAAA;YAEhD,aAAA,GAAA,IAAA,6KAAA,EAAC,gOAAA,EAAA;gBACA,WAAU;gBACV,OAAO,IAAI,4BAA4B;gBACvC,eAAY;gBACZ,MAAK;gBACL,eAAe,8LAAA;gBACf,SAAS;gBAET,UAAA,aAAA,GAAA,IAAA,6KAAA,EAAC,wOAAA,EAAA;oBAAmB,OAAK;oBAAC,MAAK;gBAAA,CAAQ;YAAA;SACxC;IAAA,CACD;AAEF","debugId":null}},
    {"offset": {"line": 853, "column": 0}, "map": {"version":3,"sources":["file:///Users/buyantogtokh/Documents/calhacks12/node_modules/tldraw/src/lib/ui/components/Toolbar/DefaultRichTextToolbar.tsx"],"sourcesContent":["import { getMarkRange, Range, EditorEvents as TextEditorEvents } from '@tiptap/core'\nimport { MarkType } from '@tiptap/pm/model'\nimport { Box, debounce, TiptapEditor, track, useEditor, useValue } from '@tldraw/editor'\nimport React, { useCallback, useEffect, useRef, useState } from 'react'\nimport { useTranslation } from '../../hooks/useTranslation/useTranslation'\nimport { rectToBox, TldrawUiContextualToolbar } from '../primitives/TldrawUiContextualToolbar'\nimport { DefaultRichTextToolbarContent } from './DefaultRichTextToolbarContent'\nimport { LinkEditor } from './LinkEditor'\n\n/** @public */\nexport interface TLUiRichTextToolbarProps {\n\tchildren?: React.ReactNode\n}\n\n/**\n * The default rich text toolbar.\n *\n * @public @react\n */\nexport const DefaultRichTextToolbar = track(function DefaultRichTextToolbar({\n\tchildren,\n}: TLUiRichTextToolbarProps) {\n\tconst editor = useEditor()\n\n\tconst textEditor = useValue('textEditor', () => editor.getRichTextEditor(), [editor])\n\n\tif (editor.getInstanceState().isCoarsePointer || !textEditor) return null\n\n\treturn <ContextualToolbarInner textEditor={textEditor}>{children}</ContextualToolbarInner>\n})\n\nfunction ContextualToolbarInner({\n\ttextEditor,\n\tchildren,\n}: {\n\tchildren?: React.ReactNode\n\ttextEditor: TiptapEditor\n}) {\n\tconst { isEditingLink, onEditLinkStart, onEditLinkClose } = useEditingLinkBehavior(textEditor)\n\tconst [currentSelection, setCurrentSelection] = useState<Range | null>(null)\n\tconst previousSelectionBounds = useRef<Box | undefined>()\n\tconst isMousingDown = useIsMousingDownOnTextEditor(textEditor)\n\tconst msg = useTranslation()\n\n\tconst getSelectionBounds = useCallback(() => {\n\t\tif (isEditingLink) {\n\t\t\t// If we're editing a link we don't have selection bounds temporarily.\n\t\t\treturn previousSelectionBounds.current\n\t\t}\n\t\t// Get the text selection rects as a box. This will be undefined if there are no selections.\n\t\tconst selection = window.getSelection()\n\n\t\t// If there are no selections, don't return a box\n\t\tif (!currentSelection || !selection || selection.rangeCount === 0 || selection.isCollapsed)\n\t\t\treturn\n\n\t\t// Get a common box from all of the ranges' screen rects\n\t\tconst rangeBoxes: Box[] = []\n\t\tfor (let i = 0; i < selection.rangeCount; i++) {\n\t\t\tconst range = selection.getRangeAt(i)\n\t\t\trangeBoxes.push(rectToBox(range.getBoundingClientRect()))\n\t\t}\n\n\t\tconst bounds = Box.Common(rangeBoxes)\n\t\tpreviousSelectionBounds.current = bounds\n\t\treturn bounds\n\t}, [currentSelection, isEditingLink])\n\n\tuseEffect(() => {\n\t\tconst handleSelectionUpdate = ({ editor: textEditor }: TextEditorEvents['selectionUpdate']) =>\n\t\t\tsetCurrentSelection(textEditor.state.selection)\n\t\ttextEditor.on('selectionUpdate', handleSelectionUpdate)\n\t\t// Need to kick off the selection update manually to get the initial selection, esp. if select-all.\n\t\thandleSelectionUpdate({ editor: textEditor } as TextEditorEvents['selectionUpdate'])\n\t\treturn () => {\n\t\t\ttextEditor.off('selectionUpdate', handleSelectionUpdate)\n\t\t}\n\t}, [textEditor])\n\n\treturn (\n\t\t<TldrawUiContextualToolbar\n\t\t\tclassName=\"tlui-rich-text__toolbar\"\n\t\t\tgetSelectionBounds={getSelectionBounds}\n\t\t\tisMousingDown={isMousingDown}\n\t\t\tchangeOnlyWhenYChanges={true}\n\t\t\tlabel={msg('tool.rich-text-toolbar-title')}\n\t\t>\n\t\t\t{children ? (\n\t\t\t\tchildren\n\t\t\t) : isEditingLink ? (\n\t\t\t\t<LinkEditor\n\t\t\t\t\ttextEditor={textEditor}\n\t\t\t\t\tvalue={textEditor.isActive('link') ? textEditor.getAttributes('link').href : ''}\n\t\t\t\t\tonClose={onEditLinkClose}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<DefaultRichTextToolbarContent textEditor={textEditor} onEditLinkStart={onEditLinkStart} />\n\t\t\t)}\n\t\t</TldrawUiContextualToolbar>\n\t)\n}\n\nfunction useEditingLinkBehavior(textEditor?: TiptapEditor) {\n\tconst [isEditingLink, setIsEditingLink] = useState(false)\n\n\t// Set up text editor event listeners.\n\tuseEffect(() => {\n\t\tif (!textEditor) {\n\t\t\tsetIsEditingLink(false)\n\t\t\treturn\n\t\t}\n\n\t\tconst handleClick = () => {\n\t\t\tconst isLinkActive = textEditor.isActive('link')\n\t\t\tsetIsEditingLink(isLinkActive)\n\t\t}\n\n\t\ttextEditor.view.dom.addEventListener('click', handleClick)\n\t\treturn () => {\n\t\t\ttextEditor.view.dom.removeEventListener('click', handleClick)\n\t\t}\n\t}, [textEditor, isEditingLink])\n\n\t// If we're editing a link, select the entire link.\n\t// This can happen via a click or via keyboarding over to the link and then\n\t// clicking the toolbar button.\n\tuseEffect(() => {\n\t\tif (!textEditor) {\n\t\t\treturn\n\t\t}\n\n\t\t// N.B. This specifically isn't checking the isEditingLink state but\n\t\t// the current active state of the text editor. This is because there's\n\t\t// a subtelty where when going edit-to-edit, that is text editor-to-text editor\n\t\t// in different shapes, the isEditingLink state doesn't get reset quickly enough.\n\t\tif (textEditor.isActive('link')) {\n\t\t\ttry {\n\t\t\t\tconst { from, to } = getMarkRange(\n\t\t\t\t\ttextEditor.state.doc.resolve(textEditor.state.selection.from),\n\t\t\t\t\ttextEditor.schema.marks.link as MarkType\n\t\t\t\t) as Range\n\t\t\t\t// Select the entire link if we just clicked on it while in edit mode, but not if there's\n\t\t\t\t// a specific selection.\n\t\t\t\tif (textEditor.state.selection.empty) {\n\t\t\t\t\ttextEditor.commands.setTextSelection({ from, to })\n\t\t\t\t}\n\t\t\t} catch {\n\t\t\t\t// Sometimes getMarkRange throws an error when the selection is the entire document.\n\t\t\t\t// This is somewhat mysterious but it's harmless. We just need to ignore it.\n\t\t\t\t// Also, this seems to have recently broken with the React 19 preparation changes.\n\t\t\t}\n\t\t}\n\t}, [textEditor, isEditingLink])\n\n\tconst onEditLinkStart = useCallback(() => {\n\t\tsetIsEditingLink(true)\n\t}, [])\n\n\tconst onEditLinkCancel = useCallback(() => {\n\t\tsetIsEditingLink(false)\n\t}, [])\n\n\tconst onEditLinkClose = useCallback(() => {\n\t\tsetIsEditingLink(false)\n\t\tif (!textEditor) return\n\t\tconst from = textEditor.state.selection.from\n\t\ttextEditor.commands.setTextSelection({ from, to: from })\n\t}, [textEditor])\n\n\treturn { isEditingLink, onEditLinkStart, onEditLinkClose, onEditLinkCancel }\n}\n\nfunction useIsMousingDownOnTextEditor(textEditor: TiptapEditor) {\n\tconst [isMousingDown, setIsMousingDown] = useState(false)\n\n\t// Set up general event listeners for text selection.\n\tuseEffect(() => {\n\t\tif (!textEditor) return\n\n\t\tconst handlePointingStateChange = debounce(({ isPointing }: { isPointing: boolean }) => {\n\t\t\tsetIsMousingDown(isPointing)\n\t\t}, 16)\n\t\tconst handlePointingDown = () => handlePointingStateChange({ isPointing: true })\n\t\tconst handlePointingUp = () => handlePointingStateChange({ isPointing: false })\n\n\t\tconst touchDownEvents = ['touchstart', 'pointerdown', 'mousedown']\n\t\tconst touchUpEvents = ['touchend', 'pointerup', 'mouseup']\n\t\ttouchDownEvents.forEach((eventName: string) => {\n\t\t\ttextEditor.view.dom.addEventListener(eventName, handlePointingDown)\n\t\t})\n\t\ttouchUpEvents.forEach((eventName: string) => {\n\t\t\tdocument.body.addEventListener(eventName, handlePointingUp)\n\t\t})\n\t\treturn () => {\n\t\t\ttouchDownEvents.forEach((eventName: string) => {\n\t\t\t\ttextEditor.view.dom.removeEventListener(eventName, handlePointingDown)\n\t\t\t})\n\t\t\ttouchUpEvents.forEach((eventName: string) => {\n\t\t\t\tdocument.body.removeEventListener(eventName, handlePointingUp)\n\t\t\t})\n\t\t}\n\t}, [textEditor])\n\n\treturn isMousingDown\n}\n"],"names":["DefaultRichTextToolbar", "textEditor"],"mappings":"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","debugId":null}},
    {"offset": {"line": 1092, "column": 0}, "map": {"version":3,"sources":["file:///Users/buyantogtokh/Documents/calhacks12/node_modules/tldraw/src/lib/ui/components/Toolbar/DefaultToolbarContent.tsx"],"sourcesContent":["import { GeoShapeGeoStyle, useEditor, useValue } from '@tldraw/editor'\nimport { TLUiToolItem, useTools } from '../../hooks/useTools'\nimport { TldrawUiMenuToolItem } from '../primitives/menus/TldrawUiMenuToolItem'\n\n/** @public @react */\nexport function DefaultToolbarContent() {\n\treturn (\n\t\t<>\n\t\t\t<SelectToolbarItem />\n\t\t\t<HandToolbarItem />\n\t\t\t<DrawToolbarItem />\n\t\t\t<EraserToolbarItem />\n\t\t\t<ArrowToolbarItem />\n\t\t\t<TextToolbarItem />\n\t\t\t<NoteToolbarItem />\n\t\t\t<AssetToolbarItem />\n\n\t\t\t<RectangleToolbarItem />\n\t\t\t<EllipseToolbarItem />\n\t\t\t<TriangleToolbarItem />\n\t\t\t<DiamondToolbarItem />\n\n\t\t\t<HexagonToolbarItem />\n\t\t\t<OvalToolbarItem />\n\t\t\t<RhombusToolbarItem />\n\t\t\t<StarToolbarItem />\n\n\t\t\t<CloudToolbarItem />\n\t\t\t<HeartToolbarItem />\n\t\t\t<XBoxToolbarItem />\n\t\t\t<CheckBoxToolbarItem />\n\n\t\t\t<ArrowLeftToolbarItem />\n\t\t\t<ArrowUpToolbarItem />\n\t\t\t<ArrowDownToolbarItem />\n\t\t\t<ArrowRightToolbarItem />\n\n\t\t\t<LineToolbarItem />\n\t\t\t<HighlightToolbarItem />\n\t\t\t<LaserToolbarItem />\n\t\t\t<FrameToolbarItem />\n\t\t</>\n\t)\n}\n\n/** @public */\nexport function useIsToolSelected(tool: TLUiToolItem | undefined) {\n\tconst editor = useEditor()\n\tconst geo = tool?.meta?.geo\n\treturn useValue(\n\t\t'is tool selected',\n\t\t() => {\n\t\t\tif (!tool) return false\n\t\t\tconst activeToolId = editor.getCurrentToolId()\n\t\t\tif (activeToolId === 'geo') {\n\t\t\t\treturn geo === editor.getSharedStyles().getAsKnownValue(GeoShapeGeoStyle)\n\t\t\t} else {\n\t\t\t\treturn activeToolId === tool.id\n\t\t\t}\n\t\t},\n\t\t[editor, tool?.id, geo]\n\t)\n}\n\n/** @public */\nexport interface ToolbarItemProps {\n\ttool: string\n}\n\n/** @public @react */\nexport function ToolbarItem({ tool }: ToolbarItemProps) {\n\tconst tools = useTools()\n\tconst isSelected = useIsToolSelected(tools[tool])\n\treturn <TldrawUiMenuToolItem toolId={tool} isSelected={isSelected} />\n}\n\n/** @public @react */\nexport function SelectToolbarItem() {\n\treturn <ToolbarItem tool=\"select\" />\n}\n\n/** @public @react */\nexport function HandToolbarItem() {\n\treturn <ToolbarItem tool=\"hand\" />\n}\n\n/** @public @react */\nexport function DrawToolbarItem() {\n\treturn <ToolbarItem tool=\"draw\" />\n}\n\n/** @public @react */\nexport function EraserToolbarItem() {\n\treturn <ToolbarItem tool=\"eraser\" />\n}\n\n/** @public @react */\nexport function ArrowToolbarItem() {\n\treturn <ToolbarItem tool=\"arrow\" />\n}\n\n/** @public @react */\nexport function TextToolbarItem() {\n\treturn <ToolbarItem tool=\"text\" />\n}\n\n/** @public @react */\nexport function NoteToolbarItem() {\n\treturn <ToolbarItem tool=\"note\" />\n}\n\n/** @public @react */\nexport function AssetToolbarItem() {\n\treturn <TldrawUiMenuToolItem toolId=\"asset\" />\n}\n\n/** @public @react */\nexport function RectangleToolbarItem() {\n\treturn <ToolbarItem tool=\"rectangle\" />\n}\n\n/** @public @react */\nexport function EllipseToolbarItem() {\n\treturn <ToolbarItem tool=\"ellipse\" />\n}\n\n/** @public @react */\nexport function DiamondToolbarItem() {\n\treturn <ToolbarItem tool=\"diamond\" />\n}\n\n/** @public @react */\nexport function TriangleToolbarItem() {\n\treturn <ToolbarItem tool=\"triangle\" />\n}\n\n/** @public @react */\nexport function TrapezoidToolbarItem() {\n\treturn <ToolbarItem tool=\"trapezoid\" />\n}\n\n/** @public @react */\nexport function RhombusToolbarItem() {\n\treturn <ToolbarItem tool=\"rhombus\" />\n}\n\n/** @public @react */\nexport function PentagonToolbarItem() {\n\treturn <ToolbarItem tool=\"pentagon\" />\n}\n\n/** @public @react */\nexport function HeartToolbarItem() {\n\treturn <ToolbarItem tool=\"heart\" />\n}\n\n/** @public @react */\nexport function HexagonToolbarItem() {\n\treturn <ToolbarItem tool=\"hexagon\" />\n}\n\n/** @public @react */\nexport function CloudToolbarItem() {\n\treturn <ToolbarItem tool=\"cloud\" />\n}\n\n/** @public @react */\nexport function StarToolbarItem() {\n\treturn <ToolbarItem tool=\"star\" />\n}\n\n/** @public @react */\nexport function OvalToolbarItem() {\n\treturn <ToolbarItem tool=\"oval\" />\n}\n\n/** @public @react */\nexport function XBoxToolbarItem() {\n\treturn <ToolbarItem tool=\"x-box\" />\n}\n\n/** @public @react */\nexport function CheckBoxToolbarItem() {\n\treturn <ToolbarItem tool=\"check-box\" />\n}\n\n/** @public @react */\nexport function ArrowLeftToolbarItem() {\n\treturn <ToolbarItem tool=\"arrow-left\" />\n}\n\n/** @public @react */\nexport function ArrowUpToolbarItem() {\n\treturn <ToolbarItem tool=\"arrow-up\" />\n}\n\n/** @public @react */\nexport function ArrowDownToolbarItem() {\n\treturn <ToolbarItem tool=\"arrow-down\" />\n}\n\n/** @public @react */\nexport function ArrowRightToolbarItem() {\n\treturn <ToolbarItem tool=\"arrow-right\" />\n}\n\n/** @public @react */\nexport function LineToolbarItem() {\n\treturn <ToolbarItem tool=\"line\" />\n}\n\n/** @public @react */\nexport function HighlightToolbarItem() {\n\treturn <ToolbarItem tool=\"highlight\" />\n}\n\n/** @public @react */\nexport function FrameToolbarItem() {\n\treturn <ToolbarItem tool=\"frame\" />\n}\n\n/** @public @react */\nexport function LaserToolbarItem() {\n\treturn <ToolbarItem tool=\"laser\" />\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1388, "column": 0}, "map": {"version":3,"sources":["file:///Users/buyantogtokh/Documents/calhacks12/node_modules/tldraw/src/lib/ui/components/Toolbar/OverflowingToolbar.tsx"],"sourcesContent":["import {\n\tactiveElementShouldCaptureKeys,\n\tassert,\n\tmodulate,\n\tpreventDefault,\n\ttlmenus,\n\tuseEditor,\n\tuseEvent,\n\tuseUniqueSafeId,\n} from '@tldraw/editor'\nimport classNames from 'classnames'\nimport { createContext, useEffect, useLayoutEffect, useRef, useState } from 'react'\nimport { PORTRAIT_BREAKPOINT } from '../../constants'\nimport { useBreakpoint } from '../../context/breakpoints'\nimport { areShortcutsDisabled } from '../../hooks/useKeyboardShortcuts'\nimport { TLUiToolItem } from '../../hooks/useTools'\nimport { useTranslation } from '../../hooks/useTranslation/useTranslation'\nimport { TldrawUiButtonIcon } from '../primitives/Button/TldrawUiButtonIcon'\nimport {\n\tTldrawUiPopover,\n\tTldrawUiPopoverContent,\n\tTldrawUiPopoverTrigger,\n} from '../primitives/TldrawUiPopover'\nimport { TldrawUiToolbar, TldrawUiToolbarButton } from '../primitives/TldrawUiToolbar'\nimport { TldrawUiColumn, TldrawUiRow } from '../primitives/layout'\nimport { TldrawUiMenuContextProvider } from '../primitives/menus/TldrawUiMenuContext'\n\nexport const IsInOverflowContext = createContext(false)\n\nconst NUMBERED_SHORTCUT_KEYS: Record<string, number> = {\n\t'1': 0,\n\t'2': 1,\n\t'3': 2,\n\t'4': 3,\n\t'5': 4,\n\t'6': 5,\n\t'7': 6,\n\t'8': 7,\n\t'9': 8,\n\t'0': 9,\n}\n\n/** @public */\nexport interface OverflowingToolbarProps {\n\tchildren: React.ReactNode\n\torientation: 'horizontal' | 'vertical'\n\tsizingParentClassName: string\n\tminItems: number\n\tminSizePx: number\n\tmaxItems: number\n\tmaxSizePx: number\n}\n\n/** @public @react */\nexport function OverflowingToolbar({\n\tchildren,\n\torientation,\n\tsizingParentClassName,\n\tminItems,\n\tminSizePx,\n\tmaxItems,\n\tmaxSizePx,\n}: OverflowingToolbarProps) {\n\tconst editor = useEditor()\n\tconst id = useUniqueSafeId()\n\tconst breakpoint = useBreakpoint()\n\tconst msg = useTranslation()\n\tconst rButtons = useRef<HTMLElement[]>([])\n\tconst [isOpen, setIsOpen] = useState(false)\n\n\tconst mainToolsRef = useRef<HTMLDivElement>(null)\n\n\t// we have to use state instead of a ref here so that we get\n\t// an update when the overflow popover mounts / unmounts\n\tconst [overflowTools, setOverflowTools] = useState<HTMLDivElement | null>(null)\n\tconst [lastActiveOverflowItem, setLastActiveOverflowItem] = useState<string | null>(null)\n\tconst [shouldShowOverflow, setShouldShowOverflow] = useState(false)\n\n\tconst onDomUpdate = useEvent(() => {\n\t\tif (!mainToolsRef.current) return\n\n\t\t// whenever we get an update, we need to re-calculate the number of items to show and update\n\t\t// the component accordingly.\n\t\tconst sizeProp = orientation === 'horizontal' ? 'offsetWidth' : 'offsetHeight'\n\n\t\t// toolbars can contain both single items and groups. we need to keep track of both.\n\t\ttype Items = (\n\t\t\t| { type: 'item'; element: HTMLElement }\n\t\t\t| { type: 'group'; items: Items; element: HTMLElement }\n\t\t)[]\n\n\t\t// walk through the dom and collect items so we can calculate what to show/hide\n\t\tconst mainItems = collectItems(mainToolsRef.current.children)\n\t\tconst overflowItems = overflowTools ? collectItems(overflowTools.children) : null\n\t\tfunction collectItems(collection: HTMLCollection) {\n\t\t\tconst items: Items = []\n\t\t\tfor (const child of collection) {\n\t\t\t\tif (child.classList.contains('tlui-main-toolbar__group')) {\n\t\t\t\t\titems.push({\n\t\t\t\t\t\ttype: 'group',\n\t\t\t\t\t\titems: collectItems(child.children),\n\t\t\t\t\t\telement: child as HTMLElement,\n\t\t\t\t\t})\n\t\t\t\t} else if (!child.hasAttribute('data-radix-popper-content-wrapper')) {\n\t\t\t\t\titems.push({ type: 'item', element: child as HTMLElement })\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn items\n\t\t}\n\n\t\t// the number of items to show is based on the space available to the toolbar.\n\t\tconst sizingParent = findParentWithClassName(mainToolsRef.current, sizingParentClassName)\n\t\tconst size = sizingParent[sizeProp]\n\t\tconst itemsToShow = Math.floor(\n\t\t\tmodulate(size, [minSizePx, maxSizePx], [minItems, maxItems], true)\n\t\t)\n\n\t\t// now we know how many items to show, we need to walk through the items we found and show /\n\t\t// hide them accordingly. We need to keep track of:\n\t\t// the number of item's we've shown in the main content so far\n\t\tlet mainItemCount = 0\n\t\t// the item that is currently active in the overflow content (if any)\n\t\tlet newActiveOverflowItem: string | null = null\n\t\t// whether the last active overflow item is actually still in the overflow content\n\t\tlet shouldInvalidateLastActiveOverflowItem = false\n\t\t// the buttons visible in the main content\n\t\tconst numberedButtons: HTMLButtonElement[] = []\n\t\tfunction visitItems(\n\t\t\tmainItems: Items,\n\t\t\toverflowItems: Items | null\n\t\t): {\n\t\t\t// for each group of items we visit, we need to know whether we showed anything in\n\t\t\t// either section\n\t\t\tdidShowAnyInMain: boolean\n\t\t\tdidShowAnyInOverflow: boolean\n\t\t} {\n\t\t\tif (overflowItems) assert(mainItems.length === overflowItems.length)\n\n\t\t\tlet didShowAnyInMain = false\n\t\t\tlet didShowAnyInOverflow = false\n\n\t\t\tfor (let i = 0; i < mainItems.length; i++) {\n\t\t\t\tconst mainItem = mainItems[i]\n\t\t\t\tconst overflowItem = overflowItems?.[i]\n\n\t\t\t\tif (mainItem.type === 'item') {\n\t\t\t\t\tconst isLastActiveOverflowItem =\n\t\t\t\t\t\tmainItem.element.getAttribute('data-value') === lastActiveOverflowItem\n\n\t\t\t\t\t// for single items, we show them in main if we have space, or if they're the\n\t\t\t\t\t// last-used item from the overflow.\n\t\t\t\t\tlet shouldShowInMain\n\t\t\t\t\tif (lastActiveOverflowItem) {\n\t\t\t\t\t\tshouldShowInMain = mainItemCount < itemsToShow || isLastActiveOverflowItem\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// we use <= here because if there is no last active overflow item, we want\n\t\t\t\t\t\t// to show at least one item in the main toolbar.\n\t\t\t\t\t\tshouldShowInMain = mainItemCount <= itemsToShow\n\t\t\t\t\t}\n\t\t\t\t\tconst shouldShowInOverflow = mainItemCount >= itemsToShow\n\n\t\t\t\t\tdidShowAnyInMain ||= shouldShowInMain\n\t\t\t\t\tdidShowAnyInOverflow ||= shouldShowInOverflow\n\n\t\t\t\t\tsetAttribute(\n\t\t\t\t\t\tmainItem.element,\n\t\t\t\t\t\t'data-toolbar-visible',\n\t\t\t\t\t\tshouldShowInMain ? 'true' : 'false'\n\t\t\t\t\t)\n\t\t\t\t\tif (overflowItem) {\n\t\t\t\t\t\tassert(overflowItem.type === 'item')\n\t\t\t\t\t\tsetAttribute(\n\t\t\t\t\t\t\toverflowItem.element,\n\t\t\t\t\t\t\t'data-toolbar-visible',\n\t\t\t\t\t\t\tshouldShowInOverflow ? 'true' : 'false'\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\tif (shouldShowInOverflow && mainItem.element.getAttribute('aria-pressed') === 'true') {\n\t\t\t\t\t\tnewActiveOverflowItem = mainItem.element.getAttribute('data-value')\n\t\t\t\t\t}\n\t\t\t\t\tif (shouldShowInMain && mainItem.element.tagName === 'BUTTON') {\n\t\t\t\t\t\tnumberedButtons.push(mainItem.element as HTMLButtonElement)\n\t\t\t\t\t}\n\t\t\t\t\tif (!shouldShowInOverflow && isLastActiveOverflowItem) {\n\t\t\t\t\t\tshouldInvalidateLastActiveOverflowItem = true\n\t\t\t\t\t}\n\t\t\t\t\tmainItemCount++\n\t\t\t\t} else {\n\t\t\t\t\t// for groups, we show them in main if we have space, or if they're the\n\t\t\t\t\t// last-used item from the overflow.\n\t\t\t\t\tlet result, overflowGroup\n\t\t\t\t\tif (overflowItem) {\n\t\t\t\t\t\tassert(overflowItem.type === 'group')\n\t\t\t\t\t\toverflowGroup = overflowItem\n\t\t\t\t\t\tresult = visitItems(mainItem.items, overflowGroup.items)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult = visitItems(mainItem.items, null)\n\t\t\t\t\t}\n\n\t\t\t\t\tdidShowAnyInMain ||= result.didShowAnyInMain\n\t\t\t\t\tdidShowAnyInOverflow ||= result.didShowAnyInOverflow\n\n\t\t\t\t\tsetAttribute(\n\t\t\t\t\t\tmainItem.element,\n\t\t\t\t\t\t'data-toolbar-visible',\n\t\t\t\t\t\tresult.didShowAnyInMain ? 'true' : 'false'\n\t\t\t\t\t)\n\t\t\t\t\tif (overflowGroup) {\n\t\t\t\t\t\tsetAttribute(\n\t\t\t\t\t\t\toverflowGroup.element,\n\t\t\t\t\t\t\t'data-toolbar-visible',\n\t\t\t\t\t\t\tresult.didShowAnyInOverflow ? 'true' : 'false'\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn { didShowAnyInMain, didShowAnyInOverflow }\n\t\t}\n\n\t\tconst { didShowAnyInOverflow } = visitItems(mainItems, overflowItems)\n\t\tsetShouldShowOverflow(didShowAnyInOverflow)\n\t\tif (newActiveOverflowItem) {\n\t\t\tsetLastActiveOverflowItem(newActiveOverflowItem)\n\t\t} else if (shouldInvalidateLastActiveOverflowItem) {\n\t\t\tsetLastActiveOverflowItem(null)\n\t\t}\n\n\t\trButtons.current = numberedButtons\n\t})\n\n\tuseLayoutEffect(() => {\n\t\tonDomUpdate()\n\t})\n\n\tuseLayoutEffect(() => {\n\t\tif (!mainToolsRef.current) return\n\n\t\tconst mutationObserver = new MutationObserver(onDomUpdate)\n\t\tmutationObserver.observe(mainToolsRef.current, {\n\t\t\tchildList: true,\n\t\t\tsubtree: true,\n\t\t\tattributes: true,\n\t\t\tcharacterData: true,\n\t\t})\n\n\t\tconst sizingParent = findParentWithClassName(mainToolsRef.current, sizingParentClassName)\n\t\tconst resizeObserver = new ResizeObserver(onDomUpdate)\n\t\tresizeObserver.observe(sizingParent)\n\n\t\treturn () => {\n\t\t\tmutationObserver.disconnect()\n\t\t\tresizeObserver.disconnect()\n\t\t}\n\t}, [onDomUpdate, sizingParentClassName])\n\n\tuseEffect(() => {\n\t\tif (!editor.options.enableToolbarKeyboardShortcuts) return\n\n\t\tfunction handleKeyDown(event: KeyboardEvent) {\n\t\t\tif (\n\t\t\t\tareShortcutsDisabled(editor) ||\n\t\t\t\tactiveElementShouldCaptureKeys(true /* allow buttons */)\n\t\t\t) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// no accelerator keys\n\t\t\tif (event.ctrlKey || event.metaKey || event.altKey || event.shiftKey) return\n\t\t\tconst index = NUMBERED_SHORTCUT_KEYS[event.key]\n\t\t\tif (typeof index === 'number') {\n\t\t\t\tpreventDefault(event)\n\t\t\t\trButtons.current[index]?.click()\n\t\t\t}\n\t\t}\n\n\t\tdocument.addEventListener('keydown', handleKeyDown)\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleKeyDown)\n\t\t}\n\t}, [editor])\n\n\tconst popoverId = 'toolbar overflow'\n\n\tconst Layout = orientation === 'horizontal' ? TldrawUiRow : TldrawUiColumn\n\treturn (\n\t\t<>\n\t\t\t<TldrawUiToolbar\n\t\t\t\torientation={orientation}\n\t\t\t\tclassName={classNames('tlui-main-toolbar__tools', {\n\t\t\t\t\t'tlui-main-toolbar__tools__mobile': breakpoint < PORTRAIT_BREAKPOINT.TABLET_SM,\n\t\t\t\t})}\n\t\t\t\tlabel={msg('tool-panel.title')}\n\t\t\t>\n\t\t\t\t<Layout id={`${id}_main`} ref={mainToolsRef}>\n\t\t\t\t\t<TldrawUiMenuContextProvider type=\"toolbar\" sourceId=\"toolbar\">\n\t\t\t\t\t\t{children}\n\t\t\t\t\t</TldrawUiMenuContextProvider>\n\t\t\t\t</Layout>\n\t\t\t\t{shouldShowOverflow && (\n\t\t\t\t\t<IsInOverflowContext.Provider value={true}>\n\t\t\t\t\t\t<TldrawUiPopover id={popoverId} open={isOpen} onOpenChange={setIsOpen}>\n\t\t\t\t\t\t\t<TldrawUiPopoverTrigger>\n\t\t\t\t\t\t\t\t<TldrawUiToolbarButton\n\t\t\t\t\t\t\t\t\ttitle={msg('tool-panel.more')}\n\t\t\t\t\t\t\t\t\ttype=\"tool\"\n\t\t\t\t\t\t\t\t\tclassName=\"tlui-main-toolbar__overflow\"\n\t\t\t\t\t\t\t\t\tdata-testid=\"tools.more-button\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<TldrawUiButtonIcon\n\t\t\t\t\t\t\t\t\t\ticon={orientation === 'horizontal' ? 'chevron-up' : 'chevron-right'}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</TldrawUiToolbarButton>\n\t\t\t\t\t\t\t</TldrawUiPopoverTrigger>\n\t\t\t\t\t\t\t<TldrawUiPopoverContent\n\t\t\t\t\t\t\t\tside={orientation === 'horizontal' ? 'top' : 'right'}\n\t\t\t\t\t\t\t\talign={orientation === 'horizontal' ? 'center' : 'end'}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<TldrawUiToolbar\n\t\t\t\t\t\t\t\t\torientation=\"grid\"\n\t\t\t\t\t\t\t\t\tclassName=\"tlui-main-toolbar__overflow-content\"\n\t\t\t\t\t\t\t\t\tref={setOverflowTools}\n\t\t\t\t\t\t\t\t\tdata-testid=\"tools.more-content\"\n\t\t\t\t\t\t\t\t\tlabel={msg('tool-panel.more')}\n\t\t\t\t\t\t\t\t\tid={`${id}_more`}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\ttlmenus.deleteOpenMenu(popoverId, editor.contextId)\n\t\t\t\t\t\t\t\t\t\tsetIsOpen(false)\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<TldrawUiMenuContextProvider type=\"toolbar-overflow\" sourceId=\"toolbar\">\n\t\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t\t</TldrawUiMenuContextProvider>\n\t\t\t\t\t\t\t\t</TldrawUiToolbar>\n\t\t\t\t\t\t\t</TldrawUiPopoverContent>\n\t\t\t\t\t\t</TldrawUiPopover>\n\t\t\t\t\t</IsInOverflowContext.Provider>\n\t\t\t\t)}\n\t\t\t</TldrawUiToolbar>\n\t\t</>\n\t)\n}\n\nexport const isActiveTLUiToolItem = (\n\titem: TLUiToolItem,\n\tactiveToolId: string | undefined,\n\tgeoState: string | null | undefined\n) => {\n\treturn item.meta?.geo\n\t\t? activeToolId === 'geo' && geoState === item.meta?.geo\n\t\t: activeToolId === item.id\n}\n\nfunction findParentWithClassName(startingElement: HTMLElement, className: string): HTMLElement {\n\tlet element: HTMLElement | null = startingElement\n\twhile (element) {\n\t\tif (element.classList.contains(className)) {\n\t\t\treturn element\n\t\t}\n\t\telement = element.parentElement\n\t}\n\tthrow new Error('Could not find parent with class name ' + className)\n}\n\nfunction setAttribute(element: HTMLElement, name: string, value: string) {\n\tif (element.getAttribute(name) === value) return\n\telement.setAttribute(name, value)\n}\n"],"names":["mainItems", "overflowItems", "didShowAnyInOverflow"],"mappings":"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","debugId":null}},
    {"offset": {"line": 1695, "column": 0}, "map": {"version":3,"sources":["file:///Users/buyantogtokh/Documents/calhacks12/node_modules/tldraw/src/lib/ui/components/Toolbar/ToggleToolLockedButton.tsx"],"sourcesContent":["import { useEditor, useValue } from '@tldraw/editor'\nimport classNames from 'classnames'\nimport { PORTRAIT_BREAKPOINT } from '../../constants'\nimport { useActions } from '../../context/actions'\nimport { useBreakpoint } from '../../context/breakpoints'\nimport { useTranslation } from '../../hooks/useTranslation/useTranslation'\nimport { kbdStr } from '../../kbd-utils'\nimport { TldrawUiButton } from '../primitives/Button/TldrawUiButton'\nimport { TldrawUiButtonIcon } from '../primitives/Button/TldrawUiButtonIcon'\nimport { TldrawUiTooltip } from '../primitives/TldrawUiTooltip'\n\n/** @public */\nexport interface ToggleToolLockedButtonProps {\n\tactiveToolId?: string\n}\n\n/** @public @react */\nexport function ToggleToolLockedButton({ activeToolId }: ToggleToolLockedButtonProps) {\n\tconst editor = useEditor()\n\tconst breakpoint = useBreakpoint()\n\tconst msg = useTranslation()\n\tconst actions = useActions()\n\n\tconst isToolLocked = useValue('is tool locked', () => editor.getInstanceState().isToolLocked, [\n\t\teditor,\n\t])\n\tconst tool = useValue('current tool', () => editor.getCurrentTool(), [editor])\n\n\tif (!activeToolId || !tool.isLockable) return null\n\n\tconst toggleLockAction = actions['toggle-tool-lock']\n\tconst tooltipContent = toggleLockAction?.kbd\n\t\t? `${msg('action.toggle-tool-lock')} ${kbdStr(toggleLockAction.kbd)}`\n\t\t: msg('action.toggle-tool-lock')\n\n\treturn (\n\t\t<TldrawUiTooltip content={tooltipContent}>\n\t\t\t<TldrawUiButton\n\t\t\t\ttype=\"normal\"\n\t\t\t\tdata-testid=\"tool-lock\"\n\t\t\t\tclassName={classNames('tlui-main-toolbar__lock-button', {\n\t\t\t\t\t'tlui-main-toolbar__lock-button__mobile': breakpoint < PORTRAIT_BREAKPOINT.TABLET_SM,\n\t\t\t\t})}\n\t\t\t\tonClick={() => editor.updateInstanceState({ isToolLocked: !isToolLocked })}\n\t\t\t>\n\t\t\t\t<TldrawUiButtonIcon icon={isToolLocked ? 'lock' : 'unlock'} small />\n\t\t\t</TldrawUiButton>\n\t\t</TldrawUiTooltip>\n\t)\n}\n"],"names":[],"mappings":";;;;AA6CI;;;AA7CJ,SAAS,WAAW,gBAAgB;AACpC,OAAO,gBAAgB;AACvB,SAAS,2BAA2B;AACpC,SAAS,kBAAkB;AAC3B,SAAS,qBAAqB;AAC9B,SAAS,sBAAsB;AAC/B,SAAS,cAAc;AACvB,SAAS,sBAAsB;AAC/B,SAAS,0BAA0B;AACnC,SAAS,uBAAuB;;;;;;;;;;;;AAQzB,SAAS,uBAAuB,EAAE,YAAA,CAAa,CAAA,EAAgC;IACrF,MAAM,aAAS,+LAAA,CAAU;IACzB,MAAM,iBAAa,iMAAA,CAAc;IACjC,MAAM,UAAM,qNAAA,CAAe;IAC3B,MAAM,cAAU,0LAAA,CAAW;IAE3B,MAAM,mBAAe,kLAAA,EAAS;yDAAkB,IAAM,OAAO,gBAAA,CAAiB,EAAE,YAAA;wDAAc;QAC7F;KACA;IACD,MAAM,WAAO,kLAAA,EAAS;iDAAgB,IAAM,OAAO,cAAA,CAAe;gDAAG;QAAC,MAAM;KAAC;IAE7E,IAAI,CAAC,gBAAgB,CAAC,KAAK,UAAA,CAAY,CAAA,OAAO;IAE9C,MAAM,mBAAmB,OAAA,CAAQ,kBAAkB,CAAA;IACnD,MAAM,iBAAiB,kBAAkB,MACtC,GAAG,IAAI,yBAAyB,CAAC,CAAA,CAAA,MAAI,gLAAA,EAAO,iBAAiB,GAAG,CAAC,EAAA,GACjE,IAAI,yBAAyB;IAEhC,OACC,aAAA,GAAA,IAAA,6KAAA,EAAC,wNAAA,EAAA;QAAgB,SAAS;QACzB,UAAA,aAAA,GAAA,IAAA,6KAAA,EAAC,gOAAA,EAAA;YACA,MAAK;YACL,eAAY;YACZ,eAAW,iJAAA,EAAW,kCAAkC;gBACvD,0CAA0C,aAAa,0LAAA,CAAoB,SAAA;YAC5E,CAAC;YACD,SAAS,IAAM,OAAO,mBAAA,CAAoB;oBAAE,cAAc,CAAC;gBAAa,CAAC;YAEzE,UAAA,aAAA,GAAA,IAAA,6KAAA,EAAC,wOAAA,EAAA;gBAAmB,MAAM,eAAe,SAAS;gBAAU,OAAK;YAAA,CAAC;QAAA;IACnE,CACD;AAEF","debugId":null}},
    {"offset": {"line": 1765, "column": 0}, "map": {"version":3,"sources":["file:///Users/buyantogtokh/Documents/calhacks12/node_modules/tldraw/src/lib/ui/components/Toolbar/DefaultToolbar.tsx"],"sourcesContent":["import { useEditor, usePassThroughWheelEvents, useValue } from '@tldraw/editor'\nimport classNames from 'classnames'\nimport { ReactNode, memo, useRef } from 'react'\nimport { PORTRAIT_BREAKPOINT } from '../../constants'\nimport { useBreakpoint } from '../../context/breakpoints'\nimport { useTldrawUiComponents } from '../../context/components'\nimport { useReadonly } from '../../hooks/useReadonly'\nimport { useTranslation } from '../../hooks/useTranslation/useTranslation'\nimport { MobileStylePanel } from '../MobileStylePanel'\nimport { TldrawUiOrientationProvider } from '../primitives/layout'\nimport { TldrawUiToolbar } from '../primitives/TldrawUiToolbar'\nimport { DefaultToolbarContent } from './DefaultToolbarContent'\nimport { OverflowingToolbar } from './OverflowingToolbar'\nimport { ToggleToolLockedButton } from './ToggleToolLockedButton'\n\n/** @public */\nexport interface DefaultToolbarProps {\n\tchildren?: ReactNode\n\torientation?: 'horizontal' | 'vertical'\n\tminItems?: number\n\tminSizePx?: number\n\tmaxItems?: number\n\tmaxSizePx?: number\n}\n\n/**\n * The default toolbar for the editor. `children` defaults to the `DefaultToolbarContent` component.\n * Depending on the screen size, the children will overflow into a drop-down menu, with the most\n * recently active item from the overflow being shown in the main toolbar.\n *\n * @public\n * @react\n */\nexport const DefaultToolbar = memo(function DefaultToolbar({\n\tchildren,\n\torientation = 'horizontal',\n\tminItems = 4,\n\tminSizePx = 310,\n\tmaxItems = 8,\n\tmaxSizePx = 470,\n}: DefaultToolbarProps) {\n\tconst editor = useEditor()\n\tconst msg = useTranslation()\n\tconst breakpoint = useBreakpoint()\n\tconst isReadonlyMode = useReadonly()\n\tconst activeToolId = useValue('current tool id', () => editor.getCurrentToolId(), [editor])\n\n\tconst ref = useRef<HTMLDivElement>(null)\n\tusePassThroughWheelEvents(ref)\n\n\tconst { ActionsMenu, QuickActions } = useTldrawUiComponents()\n\n\tconst showQuickActions =\n\t\teditor.options.actionShortcutsLocation === 'menu'\n\t\t\t? false\n\t\t\t: editor.options.actionShortcutsLocation === 'toolbar'\n\t\t\t\t? true\n\t\t\t\t: breakpoint < PORTRAIT_BREAKPOINT.TABLET\n\n\treturn (\n\t\t<TldrawUiOrientationProvider\n\t\t\torientation={orientation}\n\t\t\ttooltipSide={orientation === 'horizontal' ? 'top' : 'right'}\n\t\t>\n\t\t\t<div\n\t\t\t\tref={ref}\n\t\t\t\tclassName={classNames('tlui-main-toolbar', `tlui-main-toolbar--${orientation}`)}\n\t\t\t>\n\t\t\t\t<div className=\"tlui-main-toolbar__inner\">\n\t\t\t\t\t<div className=\"tlui-main-toolbar__left\">\n\t\t\t\t\t\t{!isReadonlyMode && (\n\t\t\t\t\t\t\t<div className=\"tlui-main-toolbar__extras\">\n\t\t\t\t\t\t\t\t{showQuickActions && (\n\t\t\t\t\t\t\t\t\t<TldrawUiToolbar\n\t\t\t\t\t\t\t\t\t\torientation={orientation}\n\t\t\t\t\t\t\t\t\t\tclassName=\"tlui-main-toolbar__extras__controls\"\n\t\t\t\t\t\t\t\t\t\tlabel={msg('actions-menu.title')}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{QuickActions && <QuickActions />}\n\t\t\t\t\t\t\t\t\t\t{ActionsMenu && <ActionsMenu />}\n\t\t\t\t\t\t\t\t\t</TldrawUiToolbar>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<ToggleToolLockedButton activeToolId={activeToolId} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<OverflowingToolbar\n\t\t\t\t\t\t\torientation={orientation}\n\t\t\t\t\t\t\tsizingParentClassName=\"tlui-main-toolbar\"\n\t\t\t\t\t\t\tminItems={minItems}\n\t\t\t\t\t\t\tmaxItems={maxItems}\n\t\t\t\t\t\t\tminSizePx={minSizePx}\n\t\t\t\t\t\t\tmaxSizePx={maxSizePx}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{children ?? <DefaultToolbarContent />}\n\t\t\t\t\t\t</OverflowingToolbar>\n\t\t\t\t\t</div>\n\t\t\t\t\t{breakpoint < PORTRAIT_BREAKPOINT.TABLET_SM && !isReadonlyMode && (\n\t\t\t\t\t\t<div className=\"tlui-main-toolbar__tools tlui-main-toolbar__mobile-style-panel\">\n\t\t\t\t\t\t\t<MobileStylePanel />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</TldrawUiOrientationProvider>\n\t)\n})\n"],"names":["DefaultToolbar"],"mappings":";;;;AAyES,SAKkB,KALlB;;;;AAzET,SAAS,WAAW,2BAA2B,gBAAgB;AAC/D,OAAO,gBAAgB;AACvB,SAAoB,MAAM,cAAc;AACxC,SAAS,2BAA2B;AACpC,SAAS,qBAAqB;AAC9B,SAAS,6BAA6B;AACtC,SAAS,mBAAmB;AAC5B,SAAS,sBAAsB;AAC/B,SAAS,wBAAwB;AACjC,SAAS,mCAAmC;AAC5C,SAAS,uBAAuB;AAChC,SAAS,6BAA6B;AACtC,SAAS,0BAA0B;AACnC,SAAS,8BAA8B;;;;;;;;;;;;;;;;AAoBhC,MAAM,qBAAiB,qKAAA,EAAK,SAASA,gBAAe,EAC1D,QAAA,EACA,cAAc,YAAA,EACd,WAAW,CAAA,EACX,YAAY,GAAA,EACZ,WAAW,CAAA,EACX,YAAY,GAAA,EACb,EAAwB;IACvB,MAAM,aAAS,+LAAA,CAAU;IACzB,MAAM,UAAM,qNAAA,CAAe;IAC3B,MAAM,iBAAa,iMAAA,CAAc;IACjC,MAAM,qBAAiB,6LAAA,CAAY;IACnC,MAAM,mBAAe,kLAAA,EAAS;iEAAmB,IAAM,OAAO,gBAAA,CAAiB;gEAAG;QAAC,MAAM;KAAC;IAE1F,MAAM,UAAM,uKAAA,EAAuB,IAAI;IACvC,IAAA,+NAAA,EAA0B,GAAG;IAE7B,MAAM,EAAE,WAAA,EAAa,YAAA,CAAa,CAAA,OAAI,wMAAA,CAAsB;IAE5D,MAAM,mBACL,OAAO,OAAA,CAAQ,uBAAA,KAA4B,SACxC,QACA,OAAO,OAAA,CAAQ,uBAAA,KAA4B,YAC1C,OACA,aAAa,0LAAA,CAAoB,MAAA;IAEtC,OACC,aAAA,GAAA,IAAA,6KAAA,EAAC,2NAAA,EAAA;QACA;QACA,aAAa,gBAAgB,eAAe,QAAQ;QAEpD,UAAA,aAAA,GAAA,IAAA,6KAAA,EAAC,OAAA;YACA;YACA,eAAW,iJAAA,EAAW,qBAAqB,CAAA,mBAAA,EAAsB,WAAW,EAAE;YAE9E,UAAA,aAAA,GAAA,IAAA,8KAAA,EAAC,OAAA;gBAAI,WAAU;gBACd,UAAA;oBAAA,aAAA,GAAA,IAAA,8KAAA,EAAC,OAAA;wBAAI,WAAU;wBACb,UAAA;4BAAA,CAAC,kBACD,aAAA,GAAA,IAAA,8KAAA,EAAC,OAAA;gCAAI,WAAU;gCACb,UAAA;oCAAA,oBACA,aAAA,GAAA,IAAA,8KAAA,EAAC,wNAAA,EAAA;wCACA;wCACA,WAAU;wCACV,OAAO,IAAI,oBAAoB;wCAE9B,UAAA;4CAAA,gBAAgB,aAAA,GAAA,IAAA,6KAAA,EAAC,cAAA,CAAA,CAAa;4CAC9B,eAAe,aAAA,GAAA,IAAA,6KAAA,EAAC,aAAA,CAAA,CAAY;yCAAA;oCAAA;oCAG/B,aAAA,GAAA,IAAA,6KAAA,EAAC,mOAAA,EAAA;wCAAuB;oCAAA,CAA4B;iCAAA;4BAAA,CACrD;4BAED,aAAA,GAAA,IAAA,6KAAA,EAAC,2NAAA,EAAA;gCACA;gCACA,uBAAsB;gCACtB;gCACA;gCACA;gCACA;gCAEC,UAAA,YAAY,aAAA,GAAA,IAAA,6KAAA,EAAC,iOAAA,EAAA,CAAA,CAAsB;4BAAA;yBACrC;oBAAA,CACD;oBACC,aAAa,0LAAA,CAAoB,SAAA,IAAa,CAAC,kBAC/C,aAAA,GAAA,IAAA,6KAAA,EAAC,OAAA;wBAAI,WAAU;wBACd,UAAA,aAAA,GAAA,IAAA,6KAAA,EAAC,4MAAA,EAAA,CAAA,CAAiB;oBAAA,CACnB;iBAAA;YAAA,CAEF;QAAA;IACD;AAGH,CAAC","debugId":null}},
    {"offset": {"line": 1871, "column": 0}, "map": {"version":3,"sources":["file:///Users/buyantogtokh/Documents/calhacks12/node_modules/tldraw/src/lib/ui/components/Toolbar/DefaultVideoToolbarContent.tsx"],"sourcesContent":["import { TLVideoShape, track, useEditor, useValue } from '@tldraw/editor'\nimport { useCallback } from 'react'\nimport { useActions } from '../../context/actions'\nimport { useUiEvents } from '../../context/events'\nimport { useTranslation } from '../../hooks/useTranslation/useTranslation'\nimport { TldrawUiButton } from '../primitives/Button/TldrawUiButton'\nimport { TldrawUiButtonIcon } from '../primitives/Button/TldrawUiButtonIcon'\nimport { TldrawUiToolbarButton } from '../primitives/TldrawUiToolbar'\n\n/** @public */\nexport interface DefaultVideoToolbarContentProps {\n\tvideoShapeId: TLVideoShape['id']\n\tonEditAltTextStart(): void\n}\n\n/** @public @react */\nexport const DefaultVideoToolbarContent = track(function DefaultVideoToolbarContent({\n\tvideoShapeId,\n\tonEditAltTextStart,\n}: DefaultVideoToolbarContentProps) {\n\tconst editor = useEditor()\n\tconst trackEvent = useUiEvents()\n\tconst msg = useTranslation()\n\tconst source = 'video-toolbar'\n\tconst isReadonly = editor.getIsReadonly()\n\n\tconst actions = useActions()\n\n\tconst handleVideoReplace = useCallback(\n\t\t() => actions['video-replace'].onSelect('video-toolbar'),\n\t\t[actions]\n\t)\n\n\tconst handleVideoDownload = useCallback(\n\t\t() => actions['download-original'].onSelect('video-toolbar'),\n\t\t[actions]\n\t)\n\n\tconst altText = useValue(\n\t\t'altText',\n\t\t() => editor.getShape<TLVideoShape>(videoShapeId)!.props.altText,\n\t\t[editor, videoShapeId]\n\t)\n\n\treturn (\n\t\t<>\n\t\t\t{!isReadonly && (\n\t\t\t\t<TldrawUiButton\n\t\t\t\t\ttype=\"icon\"\n\t\t\t\t\ttitle={msg('tool.replace-media')}\n\t\t\t\t\tonClick={handleVideoReplace}\n\t\t\t\t\tdata-testid=\"tool.video-replace\"\n\t\t\t\t>\n\t\t\t\t\t<TldrawUiButtonIcon small icon=\"tool-media\" />\n\t\t\t\t</TldrawUiButton>\n\t\t\t)}\n\t\t\t<TldrawUiButton\n\t\t\t\ttype=\"icon\"\n\t\t\t\ttitle={msg('action.download-original')}\n\t\t\t\tonClick={handleVideoDownload}\n\t\t\t\tdata-testid=\"tool.video-download\"\n\t\t\t>\n\t\t\t\t<TldrawUiButtonIcon small icon=\"download\" />\n\t\t\t</TldrawUiButton>\n\t\t\t{(altText || !isReadonly) && (\n\t\t\t\t<TldrawUiToolbarButton\n\t\t\t\t\ttype=\"icon\"\n\t\t\t\t\tisActive={!!altText}\n\t\t\t\t\ttitle={msg('tool.media-alt-text')}\n\t\t\t\t\tdata-testid=\"tool.video-alt-text\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\ttrackEvent('alt-text-start', { source })\n\t\t\t\t\t\tonEditAltTextStart()\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<TldrawUiButtonIcon small icon=\"alt\" />\n\t\t\t\t</TldrawUiToolbarButton>\n\t\t\t)}\n\t\t</>\n\t)\n})\n"],"names":["DefaultVideoToolbarContent"],"mappings":";;;;AA6CE,mBAQG,KARH;;;AA7CF,SAAuB,OAAO,WAAW,gBAAgB;AACzD,SAAS,mBAAmB;AAC5B,SAAS,kBAAkB;AAC3B,SAAS,mBAAmB;AAC5B,SAAS,sBAAsB;AAC/B,SAAS,sBAAsB;AAC/B,SAAS,0BAA0B;AACnC,SAAS,6BAA6B;;;;;;;;;;AAS/B,MAAM,iCAA6B,+KAAA,EAAM,SAASA,4BAA2B,EACnF,YAAA,EACA,kBAAA,EACD,EAAoC;IACnC,MAAM,aAAS,+LAAA,CAAU;IACzB,MAAM,iBAAa,0LAAA,CAAY;IAC/B,MAAM,UAAM,qNAAA,CAAe;IAC3B,MAAM,SAAS;IACf,MAAM,aAAa,OAAO,aAAA,CAAc;IAExC,MAAM,cAAU,0LAAA,CAAW;IAE3B,MAAM,yBAAqB,4KAAA;kGAC1B,IAAM,OAAA,CAAQ,eAAe,CAAA,CAAE,QAAA,CAAS,eAAe;iGACvD;QAAC,OAAO;KAAA;IAGT,MAAM,0BAAsB,4KAAA;mGAC3B,IAAM,OAAA,CAAQ,mBAAmB,CAAA,CAAE,QAAA,CAAS,eAAe;kGAC3D;QAAC,OAAO;KAAA;IAGT,MAAM,cAAU,kLAAA,EACf;oFACA,IAAM,OAAO,QAAA,CAAuB,YAAY,EAAG,KAAA,CAAM,OAAA;mFACzD;QAAC;QAAQ,YAAY;KAAA;IAGtB,OACC,aAAA,GAAA,IAAA,8KAAA,EAAA,kLAAA,EAAA;QACE,UAAA;YAAA,CAAC,cACD,aAAA,GAAA,IAAA,6KAAA,EAAC,gOAAA,EAAA;gBACA,MAAK;gBACL,OAAO,IAAI,oBAAoB;gBAC/B,SAAS;gBACT,eAAY;gBAEZ,UAAA,aAAA,GAAA,IAAA,6KAAA,EAAC,wOAAA,EAAA;oBAAmB,OAAK;oBAAC,MAAK;gBAAA,CAAa;YAAA;YAG9C,aAAA,GAAA,IAAA,6KAAA,EAAC,gOAAA,EAAA;gBACA,MAAK;gBACL,OAAO,IAAI,0BAA0B;gBACrC,SAAS;gBACT,eAAY;gBAEZ,UAAA,aAAA,GAAA,IAAA,6KAAA,EAAC,wOAAA,EAAA;oBAAmB,OAAK;oBAAC,MAAK;gBAAA,CAAW;YAAA;YAC3C,CACE,WAAW,CAAC,UAAA,KACb,aAAA,GAAA,IAAA,6KAAA,EAAC,8NAAA,EAAA;gBACA,MAAK;gBACL,UAAU,CAAC,CAAC;gBACZ,OAAO,IAAI,qBAAqB;gBAChC,eAAY;gBACZ,SAAS,MAAM;oBACd,WAAW,kBAAkB;wBAAE;oBAAO,CAAC;oBACvC,mBAAmB;gBACpB;gBAEA,UAAA,aAAA,GAAA,IAAA,6KAAA,EAAC,wOAAA,EAAA;oBAAmB,OAAK;oBAAC,MAAK;gBAAA,CAAM;YAAA;SACtC;IAAA,CAEF;AAEF,CAAC","debugId":null}},
    {"offset": {"line": 1965, "column": 0}, "map": {"version":3,"sources":["file:///Users/buyantogtokh/Documents/calhacks12/node_modules/tldraw/src/lib/ui/components/Toolbar/DefaultVideoToolbar.tsx"],"sourcesContent":["import { Box, TLVideoShape, track, useEditor, useValue } from '@tldraw/editor'\nimport { useCallback, useState } from 'react'\nimport { useTranslation } from '../../hooks/useTranslation/useTranslation'\nimport { TldrawUiContextualToolbar } from '../primitives/TldrawUiContextualToolbar'\nimport { AltTextEditor } from './AltTextEditor'\nimport { DefaultVideoToolbarContent } from './DefaultVideoToolbarContent'\n\n/** @public */\nexport interface TLUiVideoToolbarProps {\n\tchildren?: React.ReactNode\n}\n\n/** @public @react */\nexport const DefaultVideoToolbar = track(function DefaultVideoToolbar({\n\tchildren,\n}: TLUiVideoToolbarProps) {\n\tconst editor = useEditor()\n\tconst videoShapeId = useValue(\n\t\t'videoShape',\n\t\t() => {\n\t\t\tconst onlySelectedShape = editor.getOnlySelectedShape()\n\t\t\tif (!onlySelectedShape || onlySelectedShape.type !== 'video') return null\n\t\t\treturn onlySelectedShape.id\n\t\t},\n\t\t[editor]\n\t)\n\tconst showToolbar = editor.isInAny('select.idle', 'select.pointing_shape')\n\tconst isLocked = useValue(\n\t\t'locked',\n\t\t() => (videoShapeId ? editor.getShape<TLVideoShape>(videoShapeId)?.isLocked : false),\n\t\t[editor, videoShapeId]\n\t)\n\tif (!videoShapeId || !showToolbar || isLocked) return null\n\n\treturn (\n\t\t<ContextualToolbarInner key={videoShapeId} videoShapeId={videoShapeId}>\n\t\t\t{children}\n\t\t</ContextualToolbarInner>\n\t)\n})\n\nfunction ContextualToolbarInner({\n\tchildren,\n\tvideoShapeId,\n}: {\n\tchildren?: React.ReactNode\n\tvideoShapeId: TLVideoShape['id']\n}) {\n\tconst editor = useEditor()\n\tconst msg = useTranslation()\n\n\tconst [isEditingAltText, setIsEditingAltText] = useState(false)\n\tconst handleEditAltTextStart = useCallback(() => setIsEditingAltText(true), [])\n\tconst onEditAltTextClose = useCallback(() => setIsEditingAltText(false), [])\n\n\tconst getSelectionBounds = useCallback(() => {\n\t\tconst fullBounds = editor.getSelectionScreenBounds()\n\t\tif (!fullBounds) return undefined\n\t\treturn new Box(fullBounds.x, fullBounds.y, fullBounds.width, 0)\n\t}, [editor])\n\n\treturn (\n\t\t<TldrawUiContextualToolbar\n\t\t\tclassName=\"tlui-video__toolbar\"\n\t\t\tgetSelectionBounds={getSelectionBounds}\n\t\t\tlabel={msg('tool.video-toolbar-title')}\n\t\t>\n\t\t\t{children ? (\n\t\t\t\tchildren\n\t\t\t) : isEditingAltText ? (\n\t\t\t\t<AltTextEditor shapeId={videoShapeId} onClose={onEditAltTextClose} source=\"video-toolbar\" />\n\t\t\t) : (\n\t\t\t\t<DefaultVideoToolbarContent\n\t\t\t\t\tvideoShapeId={videoShapeId}\n\t\t\t\t\tonEditAltTextStart={handleEditAltTextStart}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</TldrawUiContextualToolbar>\n\t)\n}\n"],"names":["DefaultVideoToolbar"],"mappings":";;;;AAmCE;;;;AAnCF,SAAS,KAAmB,OAAO,WAAW,gBAAgB;AAC9D,SAAS,aAAa,gBAAgB;AACtC,SAAS,sBAAsB;AAC/B,SAAS,iCAAiC;AAC1C,SAAS,qBAAqB;AAC9B,SAAS,kCAAkC;;;;;;;;AAQpC,MAAM,0BAAsB,+KAAA,EAAM,SAASA,qBAAoB,EACrE,QAAA,EACD,EAA0B;IACzB,MAAM,aAAS,+LAAA,CAAU;IACzB,MAAM,mBAAe,kLAAA,EACpB;2EACA,MAAM;YACL,MAAM,oBAAoB,OAAO,oBAAA,CAAqB;YACtD,IAAI,CAAC,qBAAqB,kBAAkB,IAAA,KAAS,QAAS,CAAA,OAAO;YACrE,OAAO,kBAAkB,EAAA;QAC1B;0EACA;QAAC,MAAM;KAAA;IAER,MAAM,cAAc,OAAO,OAAA,CAAQ,eAAe,uBAAuB;IACzE,MAAM,eAAW,kLAAA,EAChB;uEACA,IAAO,eAAe,OAAO,QAAA,CAAuB,YAAY,GAAG,WAAW;sEAC9E;QAAC;QAAQ,YAAY;KAAA;IAEtB,IAAI,CAAC,gBAAgB,CAAC,eAAe,SAAU,CAAA,OAAO;IAEtD,OACC,aAAA,GAAA,IAAA,6KAAA,EAAC,wBAAA;QAA0C;QACzC;IAAA,GAD2B,YAE7B;AAEF,CAAC;AAED,SAAS,uBAAuB,EAC/B,QAAA,EACA,YAAA,EACD,EAGG;IACF,MAAM,aAAS,+LAAA,CAAU;IACzB,MAAM,UAAM,qNAAA,CAAe;IAE3B,MAAM,CAAC,kBAAkB,mBAAmB,CAAA,OAAI,yKAAA,EAAS,KAAK;IAC9D,MAAM,6BAAyB,4KAAA;sEAAY,IAAM,oBAAoB,IAAI;qEAAG,CAAC,CAAC;IAC9E,MAAM,yBAAqB,4KAAA;kEAAY,IAAM,oBAAoB,KAAK;iEAAG,CAAC,CAAC;IAE3E,MAAM,yBAAqB,4KAAA;kEAAY,MAAM;YAC5C,MAAM,aAAa,OAAO,wBAAA,CAAyB;YACnD,IAAI,CAAC,WAAY,CAAA,OAAO,KAAA;YACxB,OAAO,IAAI,wLAAA,CAAI,WAAW,CAAA,EAAG,WAAW,CAAA,EAAG,WAAW,KAAA,EAAO,CAAC;QAC/D;iEAAG;QAAC,MAAM;KAAC;IAEX,OACC,aAAA,GAAA,IAAA,6KAAA,EAAC,4OAAA,EAAA;QACA,WAAU;QACV;QACA,OAAO,IAAI,0BAA0B;QAEpC,UAAA,WACA,WACG,mBACH,aAAA,GAAA,IAAA,6KAAA,EAAC,iNAAA,EAAA;YAAc,SAAS;YAAc,SAAS;YAAoB,QAAO;QAAA,CAAgB,IAE1F,aAAA,GAAA,IAAA,6KAAA,EAAC,2OAAA,EAAA;YACA;YACA,oBAAoB;QAAA;IACrB;AAIJ","debugId":null}}]
}